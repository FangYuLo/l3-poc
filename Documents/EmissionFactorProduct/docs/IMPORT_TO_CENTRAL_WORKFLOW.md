â€˜# å¾å¸Œé”ä¿‚æ•¸åº«åŒ¯å…¥ä¸­å¤®ä¿‚æ•¸åº«å®Œæ•´æµç¨‹

## æ–‡æª”è³‡è¨Š
- **ç‰ˆæœ¬**: v1.0
- **å»ºç«‹æ—¥æœŸ**: 2025-11-17
- **è² è²¬äºº**: ç”¢å“åœ˜éšŠ
- **ç‹€æ…‹**: å·²å®Œæˆ

---

## ğŸ“‹ ç›®éŒ„
1. [åŠŸèƒ½æ¦‚è¦½](#åŠŸèƒ½æ¦‚è¦½)
2. [æ ¸å¿ƒæµç¨‹åœ–](#æ ¸å¿ƒæµç¨‹åœ–)
3. [è©³ç´°æµç¨‹èªªæ˜](#è©³ç´°æµç¨‹èªªæ˜)
4. [æŠ€è¡“å¯¦ä½œ](#æŠ€è¡“å¯¦ä½œ)
5. [è³‡æ–™çµæ§‹](#è³‡æ–™çµæ§‹)
6. [é—œéµç¨‹å¼ç¢¼ä½ç½®](#é—œéµç¨‹å¼ç¢¼ä½ç½®)
7. [é©—æ”¶æ¨™æº–](#é©—æ”¶æ¨™æº–)

---

## åŠŸèƒ½æ¦‚è¦½

ç³»çµ±æä¾›ä¸‰ç¨®ä¿‚æ•¸ä¾†æºåŒ¯å…¥åˆ°ä¸­å¤®ä¿‚æ•¸åº«çš„åŠŸèƒ½ï¼š

| ä¾†æºé¡å‹ | èªªæ˜ | åŒ¯å…¥æ–¹å¼ | éœ€è¦å¡«å¯«è¨­å®š |
|---------|------|---------|-------------|
| **è‡ªå»ºçµ„åˆä¿‚æ•¸** | ä½¿ç”¨è€…è‡ªè¡Œå»ºç«‹çš„çµ„åˆä¿‚æ•¸ | éœ€å½ˆå‡ºè¨­å®šå°è©±æ¡† | âœ… æ˜¯ |
| **å¸Œé”ä¿‚æ•¸** | æ¨™æº–æ’æ”¾ä¿‚æ•¸è³‡æ–™åº« | ç›´æ¥åŠ å…¥ï¼Œç„¡éœ€è¨­å®š | âŒ å¦ |
| **PACT ä¿‚æ•¸** | ç”¢å“ç¢³è¶³è·¡è³‡æ–™åº« | ç›´æ¥åŠ å…¥ï¼Œç„¡éœ€è¨­å®š | âŒ å¦ |

æœ¬æ–‡æª”ä¸»è¦èªªæ˜**è‡ªå»ºçµ„åˆä¿‚æ•¸**å’Œ**å¸Œé”ä¿‚æ•¸**åŒ¯å…¥ä¸­å¤®åº«çš„å®Œæ•´æµç¨‹ã€‚

---

## æ ¸å¿ƒæµç¨‹åœ–

### è‡ªå»ºçµ„åˆä¿‚æ•¸åŒ¯å…¥æµç¨‹

```mermaid
flowchart TD
    A[è‡ªå»ºä¿‚æ•¸åº«] -->|é»æ“Šã€ŒåŒ¯å…¥åˆ°ä¸­å¤®åº«ã€| B{æª¢æŸ¥å¿…è¦æ¬„ä½}
    B -->|ç¼ºå°‘æ¬„ä½| C[é¡¯ç¤ºç¼ºå¤±è­¦å‘Šå°è©±æ¡†]
    C -->|é»æ“Šè¿”å›ç·¨è¼¯| D[é–‹å•Ÿçµ„åˆä¿‚æ•¸ç·¨è¼¯å™¨]
    B -->|æ¬„ä½å®Œæ•´| E[é–‹å•ŸåŒ¯å…¥è¨­å®šå°è©±æ¡†]

    E --> F[ã€åŸºæœ¬è³‡è¨Šã€‘è‡ªå‹•å¸¶å…¥]
    F --> F1[ä¿‚æ•¸åç¨±]
    F --> F2[æè¿°]
    F --> F3[ä¿‚æ•¸å€¼å’Œå–®ä½ å”¯è®€]
    F --> F4[å•Ÿç”¨æ—¥æœŸ å”¯è®€]
    F --> F5[åœ°ç†ç¯„åœ è‡ªå‹•å°æ‡‰]
    F --> F6[è¨ˆç®—éç¨‹ å”¯è®€]
    F --> F7[ä¿‚æ•¸ä¾†æº è‡ªå‹•å½™æ•´]
    F --> F8[å¼•ç”¨å°ˆæ¡ˆ è‡ªå‹•é¡¯ç¤º]

    F8 --> G[ã€é©ç”¨ç¯„åœã€‘ä½¿ç”¨è€…å¡«å¯«]
    G --> G1[ISIC ç”¢æ¥­åˆ†é¡ å¿…å¡«]
    G --> G2[ç”Ÿå‘½é€±æœŸéšæ®µ å¿…å¡«]
    G --> G3[æ•¸æ“šå“è³ªç­‰ç´š å¿…å¡«]

    G3 --> H{é©—è­‰å¿…å¡«æ¬„ä½}
    H -->|æœªå¡«å¯«| I[é¡¯ç¤ºéŒ¯èª¤æç¤º]
    I --> G
    H -->|å®Œæ•´| J[é»æ“Šç¢ºèªåŒ¯å…¥]

    J --> K[åŸ·è¡ŒåŒ¯å…¥æ“ä½œ]
    K --> K1[å»ºç«‹ä¸­å¤®åº«ä¿‚æ•¸å‰¯æœ¬]
    K1 --> K2[ç”Ÿæˆæ–°çš„ä¸­å¤®åº« ID]
    K2 --> K3[è¤‡è£½æ‰€æœ‰åŸºæœ¬è³‡æ–™]
    K3 --> K4[åŠ å…¥åŒ¯å…¥è¨­å®šè³‡è¨Š]
    K4 --> K5[å»ºç«‹ä¾†æºé—œè¯ source_composite_id]
    K5 --> K6[åŠ å…¥ importedCompositeFactors é™£åˆ—]

    K6 --> L[æ›´æ–°è‡ªå»ºä¿‚æ•¸ç‹€æ…‹]
    L --> L1[imported_to_central = true]
    L1 --> L2[central_library_id = æ–°ID]
    L2 --> L3[imported_at = ç•¶å‰æ™‚é–“]
    L3 --> L4[last_synced_at = ç•¶å‰æ™‚é–“]

    L4 --> M[é¡¯ç¤ºæˆåŠŸè¨Šæ¯]
    M --> N[åˆ·æ–°åˆ—è¡¨]
    N --> N1[è‡ªå»ºä¿‚æ•¸åº«æŒ‰éˆ•è®Šç°]
    N --> N2[ä¸­å¤®ä¿‚æ•¸åº«å‡ºç¾æ–°ä¿‚æ•¸]
```

### å¸Œé”ä¿‚æ•¸åŒ¯å…¥æµç¨‹

```mermaid
flowchart TD
    A[å¸Œé”ä¿‚æ•¸åº«] -->|é»æ“Šã€ŒåŠ å…¥ä¸­å¤®åº«ã€| B{æª¢æŸ¥ä¿‚æ•¸ç‹€æ…‹}
    B -->|å·²åœ¨ç§»é™¤åˆ—è¡¨| C[å¾ removedFromCentralIds ç§»é™¤]
    B -->|æœªåœ¨ç§»é™¤åˆ—è¡¨| D[ç¢ºèªå·²åœ¨ä¸­å¤®åº«]

    C --> E[æ›´æ–°ç‹€æ…‹]
    D --> E
    E --> F[é¡¯ç¤ºæˆåŠŸè¨Šæ¯]
    F --> G[åˆ·æ–°ä¸­å¤®åº«åˆ—è¡¨]
    G --> H[ä¿‚æ•¸å‡ºç¾åœ¨ä¸­å¤®åº«]
```

---

## è©³ç´°æµç¨‹èªªæ˜

### 1. è‡ªå»ºçµ„åˆä¿‚æ•¸åŒ¯å…¥æµç¨‹

#### éšæ®µ 1: è§¸ç™¼æ¢ä»¶æª¢æŸ¥

**å…¥å£ä½ç½®**ï¼š
- é é¢ï¼šè‡ªå»ºä¿‚æ•¸åº«ï¼ˆUser-defined Factorsï¼‰
- è§¸ç™¼å…ƒç´ ï¼šä¿‚æ•¸è©³æƒ…é¢æ¿ä¸­çš„ã€ŒåŒ¯å…¥åˆ°ä¸­å¤®åº«ã€æŒ‰éˆ•

**è§¸ç™¼æ¢ä»¶**ï¼š
```typescript
// src/components/FactorDetail.tsx
{isUserDefined && !isCentralLibrary && factor.type === 'composite_factor' && (
  <Button
    colorScheme={factor.imported_to_central ? "gray" : "brand"}
    size="sm"
    w="100%"
    onClick={() => onImportToCentral?.(factor)}
    isDisabled={factor.imported_to_central}
  >
    {factor.imported_to_central ? 'å·²åŒ¯å…¥ä¸­å¤®åº«' : 'åŒ¯å…¥åˆ°ä¸­å¤®åº«'}
  </Button>
)}
```

**æŒ‰éˆ•ç‹€æ…‹**ï¼š
- âœ… æœªåŒ¯å…¥ï¼šè—è‰²æŒ‰éˆ•ã€ŒåŒ¯å…¥åˆ°ä¸­å¤®åº«ã€ï¼ˆå¯é»æ“Šï¼‰
- âŒ å·²åŒ¯å…¥ï¼šç°è‰²æŒ‰éˆ•ã€Œå·²åŒ¯å…¥ä¸­å¤®åº«ã€ï¼ˆç¦ç”¨ï¼‰

#### éšæ®µ 2: å¿…è¦æ¬„ä½æª¢æŸ¥

**æª¢æŸ¥é …ç›®**ï¼š
```typescript
// src/components/ImportCompositeToCentralModal.tsx:120-128
const missingFields: string[] = []
if (!compositeFactor.region || compositeFactor.region.trim() === '') {
  missingFields.push('åœ‹å®¶/å€åŸŸ')
}
if (!compositeFactor.enabledDate || compositeFactor.enabledDate.trim() === '') {
  missingFields.push('å•Ÿç”¨æ—¥æœŸ')
}
const hasMissingFields = missingFields.length > 0
```

**æª¢æŸ¥çµæœ**ï¼š

| æƒ…æ³ | é¡¯ç¤ºå…§å®¹ | å¯åŸ·è¡Œæ“ä½œ |
|------|---------|-----------|
| æ¬„ä½å®Œæ•´ | åŒ¯å…¥è¨­å®šå°è©±æ¡†ï¼ˆæ­£å¸¸è¡¨å–®ï¼‰ | å¡«å¯«é©ç”¨ç¯„åœ â†’ ç¢ºèªåŒ¯å…¥ |
| ç¼ºå°‘æ¬„ä½ | ç¼ºå¤±è­¦å‘Šå°è©±æ¡† | è¿”å›ç·¨è¼¯ / å–æ¶ˆ |

**ç¼ºå¤±è­¦å‘Šå…§å®¹**ï¼š
- æ¸…æ¥šåˆ—å‡ºç¼ºå°‘çš„æ¬„ä½
- æä¾›ã€Œè¿”å›ç·¨è¼¯ã€æŒ‰éˆ•ï¼Œå¯ç›´æ¥é–‹å•Ÿçµ„åˆä¿‚æ•¸ç·¨è¼¯å™¨
- é¡¯ç¤ºä¿‚æ•¸é è¦½è³‡è¨Šï¼ˆåç¨±ã€è¨ˆç®—å€¼ï¼‰

#### éšæ®µ 3: é–‹å•ŸåŒ¯å…¥è¨­å®šå°è©±æ¡†

**çµ„ä»¶**ï¼š`ImportCompositeToCentralModal.tsx`

**å°è©±æ¡†å…§å®¹**ï¼š

##### 3.1 åŸºæœ¬è³‡è¨Šï¼ˆè‡ªå‹•å¸¶å…¥ï¼Œå”¯è®€ï¼‰

| æ¬„ä½ | è³‡æ–™ä¾†æº | æ˜¯å¦å¯ç·¨è¼¯ | èªªæ˜ |
|------|---------|-----------|------|
| Factor Name | `compositeFactor.name` | âŒ å”¯è®€ | ä¿‚æ•¸åç¨± |
| Description | `compositeFactor.description` | âŒ å”¯è®€ | ä¿‚æ•¸æè¿° |
| Factor Value | `compositeFactor.value` + `unit` | âŒ å”¯è®€ | è¨ˆç®—çµæœï¼Œä»¥å¤§å­—é«”ç²—é«”é¡¯ç¤º |
| Enabled Date | `compositeFactor.enabledDate` | âŒ å”¯è®€ | å•Ÿç”¨æ—¥æœŸ |
| Geographic Scope | è‡ªå‹•å°æ‡‰ `region` | âŒ å”¯è®€ | åœ°ç†ç¯„åœï¼ˆä¸­æ–‡é¡¯ç¤ºï¼‰ |
| ä¿‚æ•¸ä¾†æº | å½™æ•´çµ„æˆä¿‚æ•¸ä¾†æº | âŒ å”¯è®€ | è‡ªå‹•å½™æ•´æ‰€æœ‰çµ„æˆä¿‚æ•¸çš„ä¾†æº |
| å¼•ç”¨å°ˆæ¡ˆ | `usage_info.project_references` | âŒ å”¯è®€ | é¡¯ç¤ºå¼•ç”¨æ­¤ä¿‚æ•¸çš„å°ˆæ¡ˆ |

**åœ°ç†ç¯„åœè‡ªå‹•å°æ‡‰é‚è¼¯**ï¼š
```typescript
// src/components/ImportCompositeToCentralModal.tsx:131-140
const mapRegionToScope = (region?: string): string => {
  if (!region) return 'taiwan'
  const regionLower = region.toLowerCase()
  if (regionLower.includes('å°ç£') || regionLower.includes('taiwan')) return 'taiwan'
  if (regionLower.includes('äºæ´²') || regionLower.includes('asia')) return 'asia'
  if (regionLower.includes('æ­æ´²') || regionLower.includes('europe')) return 'europe'
  if (regionLower.includes('ç¾åœ‹') || regionLower.includes('north america')) return 'north_america'
  if (regionLower.includes('å…¨çƒ') || regionLower.includes('global')) return 'global'
  return 'taiwan'
}
```

**ä¿‚æ•¸ä¾†æºå½™æ•´é‚è¼¯**ï¼š
```typescript
// src/components/ImportCompositeToCentralModal.tsx:205-226
const getComponentSources = (compositeFactor: CompositeFactor): string => {
  const sources = compositeFactor.components
    .map(comp => {
      // å„ªå…ˆä½¿ç”¨ sourceï¼Œå…¶æ¬¡ä½¿ç”¨ source_ref
      const source = comp.emission_factor?.source ||
                    comp.emission_factor?.source_ref ||
                    'æœªçŸ¥ä¾†æº'
      return source
    })
    .filter((value, index, self) => self.indexOf(value) === index)  // å»é‡è¤‡

  if (sources.length === 0) return 'ç„¡çµ„æˆä¿‚æ•¸ä¾†æºè³‡è¨Š'
  if (sources.length === 1) return sources[0]

  // å¤šå€‹ä¾†æºæ™‚ï¼Œç”¨é “è™Ÿåˆ†éš”
  return sources.join('ã€')
}
```

##### 3.2 è¨ˆç®—éç¨‹ï¼ˆæ¡ç”¨ä¿‚æ•¸è©³æƒ…æ¨£å¼ï¼Œå”¯è®€ï¼‰

é¡¯ç¤ºå…§å®¹ï¼š
- è¨ˆç®—å…¬å¼ï¼š`Î£(Factor Value Ã— Conversion Ratio Ã— Weight)`
- æ¯å€‹çµ„æˆä¿‚æ•¸çš„æ˜ç´°ï¼š
  - ä¿‚æ•¸åç¨±
  - æ¬Šé‡ç™¾åˆ†æ¯”ï¼ˆBadge é¡¯ç¤ºï¼‰
  - è¨ˆç®—éç¨‹ï¼š`å€¼ Ã— æ¬Šé‡ = è²¢ç»å€¼`
- æœ€çµ‚çµ„åˆä¿‚æ•¸å€¼ï¼ˆå¤§å­—é«”ç²—é«”é¡¯ç¤ºï¼‰

```
ã€è¨ˆç®—éç¨‹ã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Calculation Formula                 â”‚
â”‚ Formula: Î£(Factor Value Ã— Weight)   â”‚
â”‚                                     â”‚
â”‚ é›»åŠ›ç”Ÿç”¢ [WEIGHT: 60%]              â”‚
â”‚ 0.500000Ã—1 = 0.500000               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ å¤©ç„¶æ°£ç‡ƒç‡’ [WEIGHT: 40%]            â”‚
â”‚ 0.300000Ã—1 = 0.300000               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Composite Value                     â”‚
â”‚ 0.800000 kg COâ‚‚e/kWh                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### 3.3 é©ç”¨ç¯„åœï¼ˆä½¿ç”¨è€…å¡«å¯«ï¼Œå¿…å¡«ï¼‰

**3.3.1 é©ç”¨ç”¢æ¥­åˆ†é¡ï¼ˆISIC Rev.4ï¼‰***

- **æ¬„ä½é¡å‹**ï¼šä¸‹æ‹‰å¤šé¸ï¼ˆMenu + CheckboxGroupï¼‰
- **æ˜¯å¦å¿…å¡«**ï¼šâœ… æ˜¯ï¼Œè‡³å°‘é¸æ“‡ 1 å€‹
- **UI è¨­è¨ˆ**ï¼š
  - æŒ‰éˆ•é¡¯ç¤ºï¼šã€Œè«‹é¸æ“‡ç”¢æ¥­åˆ†é¡ã€æˆ–ã€Œå·²é¸æ“‡ N å€‹åˆ†é¡ã€
  - ä¸‹æ‹‰é¸å–®æœ€å¤§é«˜åº¦ï¼š300pxï¼ˆå¯æ»¾å‹•ï¼‰
  - å·²é¸æ“‡çš„åˆ†é¡ä»¥ Badge å½¢å¼é¡¯ç¤ºåœ¨ä¸‹æ–¹ï¼Œå¯é»æ“Šç§»é™¤

**å¯é¸é …ç›®**ï¼ˆå…± 19 å€‹ï¼‰ï¼š
```
A - è¾²æ¥­ã€æ—æ¥­å’Œæ¼æ¥­
B - æ¡ç¤¦åŠæ¡çŸ³æ¥­
C - è£½é€ æ¥­
D - é›»åŠ›ã€ç‡ƒæ°£ã€è’¸æ±½åŠç©ºèª¿ä¾›æ‡‰æ¥­
E - ä¾›æ°´ï¼›æ±¡æ°´è™•ç†ã€å»¢æ£„ç‰©ç®¡ç†åŠæ±¡æŸ“æ•´æ²»æ¥­
F - ç‡Ÿé€ æ¥­
G - æ‰¹ç™¼åŠé›¶å”®æ¥­ï¼›æ±½è»ŠåŠæ©Ÿè»Šä¹‹ç¶­ä¿®
H - é‹è¼¸åŠå€‰å„²æ¥­
I - ä½å®¿åŠé¤é£²æ¥­
J - è³‡è¨ŠåŠé€šè¨Šå‚³æ’­æ¥­
K - é‡‘èåŠä¿éšªæ¥­
L - ä¸å‹•ç”¢æ¥­
M - å°ˆæ¥­ã€ç§‘å­¸åŠæŠ€è¡“æœå‹™æ¥­
N - æ”¯æ´æœå‹™æ¥­
O - å…¬å…±è¡Œæ”¿åŠåœ‹é˜²ï¼›å¼·åˆ¶æ€§ç¤¾æœƒå®‰å…¨
P - æ•™è‚²æ¥­
Q - é†«ç™‚ä¿å¥åŠç¤¾æœƒå·¥ä½œæœå‹™æ¥­
R - è—è¡“ã€å¨›æ¨‚åŠä¼‘é–’æœå‹™æ¥­
S - å…¶ä»–æœå‹™æ¥­
```

**3.3.2 é©ç”¨çš„ç”Ÿå‘½é€±æœŸéšæ®µ***

- **æ¬„ä½é¡å‹**ï¼šå¡ç‰‡å¼å¤šé¸ï¼ˆè‡ªè¨‚ UIï¼‰
- **æ˜¯å¦å¿…å¡«**ï¼šâœ… æ˜¯ï¼Œè‡³å°‘é¸æ“‡ 1 å€‹
- **UI è¨­è¨ˆ**ï¼š
  - æ¯å€‹éšæ®µç‚ºç¨ç«‹çš„å¯é»æ“Šå¡ç‰‡
  - é¸ä¸­ç‹€æ…‹ï¼šè—è‰²èƒŒæ™¯ã€è—è‰²é‚Šæ¡†ã€é¡¯ç¤ºå‹¾é¸åœ–ç¤º
  - æœªé¸ä¸­ç‹€æ…‹ï¼šç™½è‰²èƒŒæ™¯ã€ç°è‰²é‚Šæ¡†

**å¯é¸é …ç›®**ï¼ˆ5 å€‹éšæ®µï¼‰ï¼š
```
â–¡ åŸæ–™å–å¾—éšæ®µ (Raw Material Acquisition Stage)
â–¡ è£½é€ éšæ®µ (Production Stage)
â–¡ é…é€éŠ·å”®éšæ®µ (Distribution Stage)
â–¡ ä½¿ç”¨éšæ®µ (Product Use Stage)
â–¡ å»¢æ£„è™•ç†éšæ®µ (End-of-life Stage)
```

**è³‡æ–™å€¼**ï¼ˆè‹±æ–‡ keyï¼‰ï¼š
- `raw_material_acquisition`
- `production`
- `distribution`
- `product_use`
- `end_of_life`

**3.3.3 æ•¸æ“šå“è³ªç­‰ç´š***

- **æ¬„ä½é¡å‹**ï¼šå¡ç‰‡å¼å–®é¸ï¼ˆè‡ªè¨‚ UIï¼‰
- **æ˜¯å¦å¿…å¡«**ï¼šâœ… æ˜¯
- **é è¨­å€¼**ï¼š`Secondary`
- **UI è¨­è¨ˆ**ï¼š
  - å…©å€‹é¸é …ç‚ºç¨ç«‹çš„å¯é»æ“Šå¡ç‰‡
  - é¸ä¸­ç‹€æ…‹ï¼šè—è‰²èƒŒæ™¯ã€è—è‰²é‚Šæ¡†ã€åœ“å½¢é¸æ“‡å™¨å¡«æ»¿
  - æœªé¸ä¸­ç‹€æ…‹ï¼šç™½è‰²èƒŒæ™¯ã€ç°è‰²é‚Šæ¡†ã€åœ“å½¢é¸æ“‡å™¨ç©ºå¿ƒ

**å¯é¸é …ç›®**ï¼š
```
â—‹ Secondary
  ç¬¬äºŒç´š - å«éƒ¨åˆ†å¯¦æ¸¬æ•¸æ“šæˆ–æ¬¡ç´šè³‡æ–™åº«

â—‹ Primary
  ç¬¬ä¸€ç´š - ä¸»è¦åŸºæ–¼å¯¦éš›é‡æ¸¬æ•¸æ“š
```

#### éšæ®µ 4: è¡¨å–®é©—è­‰

**å¿…å¡«æ¬„ä½æª¢æŸ¥**ï¼š
```typescript
// src/components/ImportCompositeToCentralModal.tsx:295-315
const handleSubmit = async () => {
  // é©—è­‰ ISIC ç”¢æ¥­åˆ†é¡
  if (formData.isic_categories.length === 0) {
    toast({
      title: 'è«‹è‡³å°‘é¸æ“‡ä¸€å€‹é©ç”¨ç”¢æ¥­åˆ†é¡ï¼ˆISICï¼‰',
      status: 'warning',
      duration: 3000,
      isClosable: true,
    })
    return
  }

  // é©—è­‰ç”Ÿå‘½é€±æœŸéšæ®µ
  if (!formData.lifecycle_stages || formData.lifecycle_stages.length === 0) {
    toast({
      title: 'è«‹è‡³å°‘é¸æ“‡ä¸€å€‹é©ç”¨çš„ç”Ÿå‘½é€±æœŸéšæ®µ',
      status: 'warning',
      duration: 3000,
      isClosable: true,
    })
    return
  }

  // å…¶ä»–æ¬„ä½è‡ªå‹•é€šéï¼ˆéƒ½æœ‰é è¨­å€¼ï¼‰
}
```

**é©—è­‰è¦å‰‡ç¸½è¡¨**ï¼š

| æ¬„ä½ | æ˜¯å¦å¿…å¡« | é©—è­‰è¦å‰‡ | éŒ¯èª¤è¨Šæ¯ |
|------|---------|---------|---------|
| ä¿‚æ•¸åç¨± | - | å”¯è®€ | - |
| ä¿‚æ•¸å€¼ | - | å”¯è®€ | - |
| åœ°ç†ç¯„åœ | - | å”¯è®€ | - |
| ISIC ç”¢æ¥­åˆ†é¡ | âœ… | è‡³å°‘é¸æ“‡ 1 å€‹ | è«‹è‡³å°‘é¸æ“‡ä¸€å€‹é©ç”¨ç”¢æ¥­åˆ†é¡ï¼ˆISICï¼‰ |
| ç”Ÿå‘½é€±æœŸéšæ®µ | âœ… | è‡³å°‘é¸æ“‡ 1 å€‹ | è«‹è‡³å°‘é¸æ“‡ä¸€å€‹é©ç”¨çš„ç”Ÿå‘½é€±æœŸéšæ®µ |
| æ•¸æ“šå“è³ªç­‰ç´š | âœ… | é è¨­ Secondary | - |

#### éšæ®µ 5: åŸ·è¡ŒåŒ¯å…¥æ“ä½œ

**ä¸»è¦å‡½æ•¸**ï¼š`importCompositeToCentral()`ï¼ˆä½æ–¼ `useComposites.ts:259-355`ï¼‰

**æ­¥é©Ÿ 5.1ï¼šå»ºç«‹ä¸­å¤®åº«ä¿‚æ•¸å‰¯æœ¬**

```typescript
// src/hooks/useComposites.ts:275-316
const currentTime = new Date().toISOString()
const centralLibraryId = Date.now()  // ç”Ÿæˆæ–°çš„ä¸­å¤®åº« ID

const centralFactor: ExtendedFactorTableItem = {
  // åŸºæœ¬è³‡è¨Š
  id: centralLibraryId,  // â† æ–°çš„ä¸­å¤®åº« IDï¼ˆä¸èˆ‡è‡ªå»ºä¿‚æ•¸ ID è¡çªï¼‰
  type: 'composite_factor',
  name: compositeData.name,
  value: compositeData.value,
  unit: compositeData.unit,

  // ä¸­å¤®åº«æ¨™æº–æ¬„ä½
  year: compositeData.year,
  region: compositeData.region,
  method_gwp: 'GWP100',
  source_type: 'user_defined',
  source_ref: compositeData.version,
  version: compositeData.version,

  // åŒ¯å…¥è¨­å®šè³‡è¨Šï¼ˆä¾†è‡ªè¡¨å–®ï¼‰
  data: {
    ...compositeData,
    isic_categories: formData.isic_categories,
    geographic_scope: formData.geographic_scope,
    lifecycle_stages: formData.lifecycle_stages,
    data_quality: formData.data_quality,
    system_boundary_detail: formData.system_boundary_detail,
    composition_notes: formData.composition_notes,
    imported_at: currentTime,
    source_composite_id: compositeData.id,  // ä¹Ÿåœ¨ data ä¸­ä¿å­˜ï¼Œä»¥ä¾¿è©³æƒ…é¢æ¿è­˜åˆ¥
  },

  // ä½¿ç”¨è¿½è¹¤
  projectUsage: [],
  usageText: 'å¾è‡ªå»ºçµ„åˆä¿‚æ•¸åŒ¯å…¥',

  // ğŸ”‘ ä¾†æºè¿½è¹¤ï¼ˆé—œéµæ¬„ä½ï¼‰
  source_composite_id: compositeData.id,     // â† æŒ‡å‘ä¾†æºè‡ªå»ºä¿‚æ•¸
  source_version: compositeData.version,     // ä¾†æºä¿‚æ•¸ç‰ˆæœ¬
  synced_at: currentTime,                    // åŒæ­¥æ™‚é–“
  synced_version: compositeData.version,     // å·²åŒæ­¥ç‰ˆæœ¬

  // æ™‚é–“æˆ³è¨˜
  imported_at: currentTime,                  // é¦–æ¬¡åŒ¯å…¥æ™‚é–“
  last_synced_at: currentTime,               // æœ€å¾ŒåŒæ­¥æ™‚é–“
  last_synced_version: compositeData.version, // æœ€å¾ŒåŒæ­¥ç‰ˆæœ¬

  // çµ„æˆè³‡æ–™ï¼ˆå‰¯æœ¬ï¼‰
  formula_type: compositeData.formula_type,  // è¨ˆç®—æ–¹æ³•
  components: compositeData.components,      // çµ„æˆä¿‚æ•¸
}

// åŠ å…¥ä¸­å¤®åº«é™£åˆ—
addImportedCompositeToCentral(centralFactor)
```

**æ­¥é©Ÿ 5.2ï¼šæ›´æ–°è‡ªå»ºä¿‚æ•¸ç‹€æ…‹**

```typescript
// src/hooks/useComposites.ts:320-330
const updatedCompositeData = {
  ...compositeData,

  // ğŸ”‘ æ¨™è¨˜ç‚ºå·²åŒ¯å…¥ï¼ˆé—œéµç‹€æ…‹ï¼‰
  imported_to_central: true,               // â† å·²åŒ¯å…¥æ¨™è¨˜
  central_library_id: centralLibraryId,    // â† é—œè¯åˆ°ä¸­å¤®åº«ä¿‚æ•¸ ID

  // æ™‚é–“æˆ³è¨˜
  imported_at: currentTime,                // é¦–æ¬¡åŒ¯å…¥æ™‚é–“ï¼ˆä¸è®Šï¼‰
  last_synced_at: currentTime,             // æœ€å¾ŒåŒæ­¥æ™‚é–“
  last_synced_version: compositeData.version, // å·²åŒæ­¥ç‰ˆæœ¬
}

updateUserDefinedCompositeFactor(compositeId, updatedCompositeData)
```

**æ­¥é©Ÿ 5.3ï¼šè³‡æ–™æŒä¹…åŒ–**

```typescript
// src/hooks/useMockData.ts:68-74
export function addImportedCompositeToCentral(factor: ExtendedFactorTableItem) {
  // æª¢æŸ¥æ˜¯å¦å·²å­˜åœ¨ï¼ˆé¿å…é‡è¤‡åŒ¯å…¥ï¼‰
  const exists = importedCompositeFactors.some(f => f.id === factor.id)
  if (!exists) {
    importedCompositeFactors.push(factor)  // â† å­˜å„²åœ¨å…¨å±€é™£åˆ—
  }
}
```

#### éšæ®µ 6: é¡¯ç¤ºçµæœèˆ‡ UI æ›´æ–°

**æˆåŠŸè¨Šæ¯**ï¼š
```typescript
toast({
  title: 'åŒ¯å…¥æˆåŠŸ',
  description: 'çµ„åˆä¿‚æ•¸å·²æˆåŠŸåŒ¯å…¥ä¸­å¤®åº«',
  status: 'success',
  duration: 5000,
  isClosable: true,
})
```

**UI æ›´æ–°**ï¼š

| ä½ç½® | è®ŠåŒ– | èªªæ˜ |
|------|------|------|
| è‡ªå»ºä¿‚æ•¸åº« | æŒ‰éˆ•ï¼šã€ŒåŒ¯å…¥åˆ°ä¸­å¤®åº«ã€â†’ã€Œå·²åŒ¯å…¥ä¸­å¤®åº«ã€ï¼ˆç°è‰²ç¦ç”¨ï¼‰ | æ¨™è¨˜ç‚ºå·²åŒ¯å…¥ |
| ä¸­å¤®ä¿‚æ•¸åº« | å‡ºç¾æ–°çš„ä¿‚æ•¸é …ç›® | é¡¯ç¤ºå¾è‡ªå»ºä¿‚æ•¸åŒ¯å…¥çš„çµ„åˆä¿‚æ•¸ |
| ä¿‚æ•¸è©³æƒ…é¢æ¿ | é¡¯ç¤ºåŒ¯å…¥ç‹€æ…‹å’Œä¸­å¤®åº« ID | å¯è¿½è¹¤é—œè¯è³‡è¨Š |

**åˆ—è¡¨åˆ·æ–°æ©Ÿåˆ¶**ï¼š
```typescript
// src/app/page.tsx
setRefreshKey(prev => prev + 1)              // â† åˆ·æ–°è‡ªå»ºä¿‚æ•¸åº«
setCentralLibraryUpdateKey(prev => prev + 1) // â† åˆ·æ–°ä¸­å¤®ä¿‚æ•¸åº«
```

---

### 2. å¸Œé”ä¿‚æ•¸åŒ¯å…¥æµç¨‹

#### éšæ®µ 1: è§¸ç™¼æ¢ä»¶

**å…¥å£ä½ç½®**ï¼š
- é é¢ï¼šå¸Œé”ä¿‚æ•¸åº«ï¼ˆStandard Emission Factorsï¼‰
- è§¸ç™¼å…ƒç´ ï¼šä¿‚æ•¸è©³æƒ…é¢æ¿ä¸­çš„ã€ŒåŠ å…¥ä¸­å¤®åº«ã€æŒ‰éˆ•

**è§¸ç™¼æ¢ä»¶**ï¼š
```typescript
// src/components/FactorDetail.tsx
{!isUserDefined && !isCentralLibrary && (
  <Button
    colorScheme="brand"
    size="sm"
    w="100%"
    onClick={() => onAddToCentral?.(factor)}
  >
    åŠ å…¥ä¸­å¤®åº«
  </Button>
)}
```

**ç‰¹é»**ï¼š
- âœ… ç„¡éœ€å½ˆå‡ºå°è©±æ¡†
- âœ… ç„¡éœ€å¡«å¯«ä»»ä½•è¨­å®š
- âœ… è³‡æ–™å®Œæ•´ï¼Œå¯ç›´æ¥åŠ å…¥

#### éšæ®µ 2: åŸ·è¡ŒåŠ å…¥æ“ä½œ

**ä¸»è¦å‡½æ•¸**ï¼š`addStandardFactorToCentral()`ï¼ˆä½æ–¼ `useMockData.ts:87-122`ï¼‰

**è™•ç†é‚è¼¯**ï¼š
```typescript
export function addStandardFactorToCentral(factorId: number): {
  success: boolean
  message: string
  error?: string
} {
  try {
    console.log('[addStandardFactorToCentral] å°‡å¸Œé”ä¿‚æ•¸åŠ å…¥ä¸­å¤®åº«, factorId:', factorId)

    // æª¢æŸ¥ä¿‚æ•¸æ˜¯å¦å·²åœ¨ç§»é™¤åˆ—è¡¨ä¸­
    if (removedFromCentralIds.has(factorId)) {
      // å¾ç§»é™¤åˆ—è¡¨ä¸­ç§»é™¤ï¼Œä½¿å…¶åœ¨ä¸­å¤®åº«ä¸­å¯è¦‹
      removedFromCentralIds.delete(factorId)
      console.log('[addStandardFactorToCentral] å¾ç§»é™¤åˆ—è¡¨ä¸­ç§»é™¤ä¿‚æ•¸ID:', factorId)

      return {
        success: true,
        message: 'å·²æˆåŠŸåŠ å…¥ä¸­å¤®ä¿‚æ•¸åº«'
      }
    }

    // ä¿‚æ•¸æœ¬èº«å·²ç¶“åœ¨ç³»çµ±ä¸­ï¼ˆå¸Œé”ä¿‚æ•¸åº«ï¼‰ï¼Œç„¡éœ€æ–°å¢è¨˜éŒ„
    // åªè¦ä¸åœ¨ removedFromCentralIds ä¸­ï¼Œå°±æœƒå‡ºç¾åœ¨ä¸­å¤®åº«æª¢è¦–
    return {
      success: true,
      message: 'æ­¤ä¿‚æ•¸å·²åœ¨ä¸­å¤®ä¿‚æ•¸åº«ä¸­'
    }
  } catch (error) {
    console.error('[addStandardFactorToCentral] åŠ å…¥å¤±æ•—:', error)
    return {
      success: false,
      message: 'åŠ å…¥ä¸­å¤®ä¿‚æ•¸åº«å¤±æ•—',
      error: error instanceof Error ? error.message : 'æœªçŸ¥éŒ¯èª¤'
    }
  }
}
```

**è¨­è¨ˆåŸç†**ï¼š
- å¸Œé”ä¿‚æ•¸æœ¬èº«å°±å­˜åœ¨æ–¼ç³»çµ±è³‡æ–™ä¸­ï¼ˆ`factorList` é™£åˆ—ï¼‰
- ä¸­å¤®åº«æ˜¯ä¸€å€‹ã€Œè¦–åœ–ã€ï¼Œé¡¯ç¤ºæ‰€æœ‰æœªè¢«ç§»é™¤çš„ä¿‚æ•¸
- ä½¿ç”¨ `removedFromCentralIds` Set ä¾†æ¨™è¨˜å·²ç§»é™¤çš„ä¿‚æ•¸
- åŠ å…¥æ“ä½œ = å¾ç§»é™¤åˆ—è¡¨ä¸­ç§»é™¤ IDï¼ˆå¦‚æœå­˜åœ¨ï¼‰

#### éšæ®µ 3: UI æ›´æ–°

**æˆåŠŸè¨Šæ¯**ï¼š
```typescript
toast({
  title: result.message,  // "å·²æˆåŠŸåŠ å…¥ä¸­å¤®ä¿‚æ•¸åº«"
  status: 'success',
  duration: 3000,
  isClosable: true,
})
```

**åˆ—è¡¨è®ŠåŒ–**ï¼š
- ä¸­å¤®ä¿‚æ•¸åº«ï¼šè©²å¸Œé”ä¿‚æ•¸å‡ºç¾åœ¨åˆ—è¡¨ä¸­
- å¸Œé”ä¿‚æ•¸åº«ï¼šç„¡è®ŠåŒ–ï¼ˆä¿‚æ•¸ä»åœ¨åŸä½ç½®ï¼‰

---

## æŠ€è¡“å¯¦ä½œ

### é›™å‘é—œè¯æ©Ÿåˆ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è‡ªå»ºçµ„åˆä¿‚æ•¸ï¼ˆID: 123ï¼‰              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ imported_to_central: true   â”‚â”€â”€â”€â”â”‚
â”‚  â”‚ central_library_id: 456     â”‚   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                                       â”‚
                                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸­å¤®åº«ä¿‚æ•¸ï¼ˆID: 456ï¼‰                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ source_composite_id: 123    â”‚â†â”€â”€â”˜
â”‚  â”‚ source_type: user_defined   â”‚
â”‚  â”‚ synced_version: v1.0        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é—œè¯å»ºç«‹**ï¼š
- è‡ªå»ºä¿‚æ•¸è¨˜éŒ„ `central_library_id`ï¼šæŒ‡å‘ä¸­å¤®åº«ä¿‚æ•¸ ID
- ä¸­å¤®åº«ä¿‚æ•¸è¨˜éŒ„ `source_composite_id`ï¼šæŒ‡å‘ä¾†æºè‡ªå»ºä¿‚æ•¸ ID

**ç”¨é€”**ï¼š
- å¾ä¸­å¤®åº«ç§»é™¤æ™‚ï¼Œå¯é€šé `source_composite_id` æ‰¾åˆ°ä¾†æºè‡ªå»ºä¿‚æ•¸ä¸¦æ›´æ–°å…¶ç‹€æ…‹
- ç‰ˆæœ¬åŒæ­¥æ™‚ï¼Œå¯è¿½è¹¤ä¾†æºä¿‚æ•¸çš„ç‰ˆæœ¬è®ŠåŒ–

### è³‡æ–™æŒä¹…åŒ–ç­–ç•¥

**è‡ªå»ºçµ„åˆä¿‚æ•¸**ï¼š
```typescript
// src/hooks/useMockData.ts:202
let userDefinedCompositeFactors: UserDefinedCompositeFactor[] = []

// æ–°å¢
export function addUserDefinedCompositeFactor(factor: any)

// æ›´æ–°
export function updateUserDefinedCompositeFactor(id: number, updates: any)

// æŸ¥è©¢
export function getUserDefinedCompositeFactors(): UserDefinedCompositeFactor[]
export function getUserDefinedCompositeFactorById(id: number)
```

**ä¸­å¤®åº«ä¿‚æ•¸**ï¼š
```typescript
// src/hooks/useMockData.ts:60
let importedCompositeFactors: ExtendedFactorTableItem[] = []

// æ–°å¢
export function addImportedCompositeToCentral(factor: ExtendedFactorTableItem)

// æŸ¥è©¢
export function getImportedCompositeFactors(): ExtendedFactorTableItem[]
```

**ç§»é™¤åˆ—è¡¨**ï¼š
```typescript
// src/hooks/useMockData.ts:63
let removedFromCentralIds: Set<number> = new Set()

// åœ¨ getCentralLibraryFactors() ä¸­éæ¿¾
return allItems.filter(item => !removedFromCentralIds.has(item.id))
```

### è‡ªå‹•ç”Ÿæˆæ¬„ä½

#### 1. çµ„æˆå‚™è¨» (composition_notes)

```typescript
// src/components/ImportCompositeToCentralModal.tsx:268-278
const generateCompositionNotes = (
  compositeFactor: CompositeFactor,
  formData: ImportCompositeToCentralFormData
): string => {
  // çµ„æˆè³‡è¨Š
  const compositionInfo = `ã€çµ„æˆè³‡è¨Šã€‘
æœ¬çµ„åˆä¿‚æ•¸ç”± ${compositeFactor.components.length} å€‹åŸºç¤ä¿‚æ•¸çµ„æˆï¼Œæ¡ç”¨${compositeFactor.formulaType === 'weighted' ? 'æ¬Šé‡å¹³å‡' : 'æ¬Šé‡åŠ ç¸½'}è¨ˆç®—æ–¹å¼ã€‚
çµ„æˆï¼š${compositeFactor.components.map(c => c.name).join('ã€')}ã€‚`

  return compositionInfo
}
```

**ç”Ÿæˆç¯„ä¾‹**ï¼š
```
ã€çµ„æˆè³‡è¨Šã€‘
æœ¬çµ„åˆä¿‚æ•¸ç”± 3 å€‹åŸºç¤ä¿‚æ•¸çµ„æˆï¼Œæ¡ç”¨æ¬Šé‡å¹³å‡è¨ˆç®—æ–¹å¼ã€‚
çµ„æˆï¼šé›»åŠ›ç”Ÿç”¢ã€å¤©ç„¶æ°£ç‡ƒç‡’ã€æŸ´æ²¹é‹è¼¸ã€‚
```

#### 2. ç³»çµ±é‚Šç•Œè©³ç´°èªªæ˜ (system_boundary_detail)

```typescript
// src/components/ImportCompositeToCentralModal.tsx:193-202
const generateSystemBoundaryText = (stages: string[]): string => {
  if (!stages || stages.length === 0) return 'Cradle-to-Grave'

  const stageNames = stages.map(code => {
    const fullName = lifecycleStageNames[code] || code
    // æå–éšæ®µåç¨±ï¼ˆå»æ‰è‹±æ–‡éƒ¨åˆ†ï¼‰
    const match = fullName.match(/^(.+?)\s*\(/)
    return match ? match[1] : fullName
  })

  return stageNames.join(' + ')
}
```

**ç”Ÿæˆç¯„ä¾‹**ï¼š
```
åŸæ–™å–å¾—éšæ®µ + è£½é€ éšæ®µ + é…é€éŠ·å”®éšæ®µ
```

---

## è³‡æ–™çµæ§‹

### 1. è‡ªå»ºçµ„åˆä¿‚æ•¸ (UserDefinedCompositeFactor)

```typescript
interface UserDefinedCompositeFactor {
  // åŸºæœ¬è³‡è¨Š
  id: number
  name: string
  value: number
  unit: string
  type: 'composite_factor'
  formula_type: 'weighted' | 'sum'
  components: CompositeComponent[]

  // å¿…è¦æ¬„ä½ï¼ˆåŒ¯å…¥å‰éœ€å¡«å¯«ï¼‰
  region: string              // åœ‹å®¶/å€åŸŸ â­
  enabledDate: string         // å•Ÿç”¨æ—¥æœŸ â­

  // ç‰ˆæœ¬è³‡è¨Š
  version: string
  version_history?: VersionHistoryEntry[]
  created_at: string
  updated_at: string

  // ğŸ”‘ åŒæ­¥ç‹€æ…‹ï¼ˆé—œéµæ¬„ä½ï¼‰
  imported_to_central: boolean       // æ˜¯å¦å·²åŒ¯å…¥ä¸­å¤®åº«
  central_library_id?: number        // ä¸­å¤®åº«ä¿‚æ•¸ ID
  imported_at?: string               // é¦–æ¬¡åŒ¯å…¥æ™‚é–“
  last_synced_at?: string            // æœ€å¾ŒåŒæ­¥æ™‚é–“
  last_synced_version?: string       // æœ€å¾ŒåŒæ­¥ç‰ˆæœ¬

  // ä½¿ç”¨è¿½è¹¤
  usage_info?: FactorUsageInfo       // å¼•ç”¨å°ˆæ¡ˆè³‡è¨Š
}
```

### 2. ä¸­å¤®åº«ä¿‚æ•¸ (ExtendedFactorTableItem)

```typescript
interface ExtendedFactorTableItem extends FactorTableItem {
  // åŸºæœ¬è³‡è¨Š
  id: number                    // ä¸­å¤®åº« IDï¼ˆç¨ç«‹ IDï¼Œä¸èˆ‡è‡ªå»ºä¿‚æ•¸ ID è¡çªï¼‰
  type: 'composite_factor'
  name: string
  value: number
  unit: string

  // ä¸­å¤®åº«æ¨™æº–æ¬„ä½
  year: number
  region: string
  method_gwp: string
  source_type: 'user_defined' | 'standard' | 'pact' | 'supplier'
  source_ref: string
  version: string

  // åŒ¯å…¥è¨­å®šè³‡è¨Š
  data: {
    // åŸå§‹çµ„åˆä¿‚æ•¸è³‡æ–™
    ...compositeData

    // ä½¿ç”¨è€…å¡«å¯«çš„é©ç”¨ç¯„åœ
    isic_categories: string[]            // ISIC ç”¢æ¥­åˆ†é¡
    geographic_scope: string             // åœ°ç†ç¯„åœ
    lifecycle_stages: string[]           // ç”Ÿå‘½é€±æœŸéšæ®µ
    data_quality: 'Secondary' | 'Primary' // æ•¸æ“šå“è³ªç­‰ç´š

    // è‡ªå‹•ç”Ÿæˆ
    system_boundary_detail: string       // ç³»çµ±é‚Šç•Œè©³ç´°èªªæ˜
    composition_notes: string            // çµ„æˆå‚™è¨»
    imported_at: string
    source_composite_id: number          // ä¹Ÿåœ¨ data ä¸­ä¿å­˜ï¼Œä»¥ä¾¿è©³æƒ…é¢æ¿è­˜åˆ¥
  }

  // ğŸ”‘ ä¾†æºè¿½è¹¤ï¼ˆé—œéµæ¬„ä½ï¼‰
  source_composite_id?: number           // ä¾†æºè‡ªå»ºä¿‚æ•¸ ID
  source_version?: string                // ä¾†æºç‰ˆæœ¬
  synced_at?: string                     // åŒæ­¥æ™‚é–“
  synced_version?: string                // å·²åŒæ­¥ç‰ˆæœ¬

  // çµ„æˆè³‡æ–™ï¼ˆå‰¯æœ¬ï¼‰
  formula_type: 'weighted' | 'sum'
  components: CompositeComponent[]

  // ä½¿ç”¨è¿½è¹¤
  projectUsage?: ProjectUsage[]
  usageText: string                      // "å¾è‡ªå»ºçµ„åˆä¿‚æ•¸åŒ¯å…¥"

  // æ™‚é–“æˆ³è¨˜
  imported_at: string                    // é¦–æ¬¡åŒ¯å…¥æ™‚é–“
  last_synced_at: string                 // æœ€å¾ŒåŒæ­¥æ™‚é–“
  last_synced_version: string            // æœ€å¾ŒåŒæ­¥ç‰ˆæœ¬
}
```

### 3. åŒ¯å…¥è¨­å®šè¡¨å–® (ImportCompositeToCentralFormData)

```typescript
interface ImportCompositeToCentralFormData {
  // åŸºæœ¬è³‡è¨Šï¼ˆè‡ªå‹•å¸¶å…¥ï¼‰
  factor_name: string
  description: string
  factor_value: number
  unit: string

  // é©ç”¨ç¯„åœï¼ˆä½¿ç”¨è€…å¡«å¯«ï¼‰
  isic_categories: string[]                // å¿…å¡«ï¼Œè‡³å°‘ 1 å€‹
  geographic_scope: string                 // è‡ªå‹•å°æ‡‰
  lifecycle_stages: string[]               // å¿…å¡«ï¼Œè‡³å°‘ 1 å€‹
  data_quality: 'Secondary' | 'Primary'    // å¿…å¡«ï¼Œé è¨­ Secondary

  // è‡ªå‹•ç”Ÿæˆæ¬„ä½
  valid_from?: string                      // è‡ªå‹•ä½¿ç”¨ enabledDate
  composition_notes?: string               // è‡ªå‹•ç”Ÿæˆ
  system_boundary_detail?: string          // è‡ªå‹•ç”Ÿæˆ
}
```

### 4. çµ„æˆä¿‚æ•¸ (CompositeComponent)

```typescript
interface CompositeComponent {
  name: string
  value: number
  unit: string
  weight: number
  dataQuality?: string

  // ä¿‚æ•¸ä¾†æºè³‡è¨Š
  emission_factor?: {
    source?: string           // ä¿‚æ•¸ä¾†æºåç¨±ï¼ˆå„ªå…ˆï¼‰
    source_ref?: string       // ä¿‚æ•¸ä¾†æºå¼•ç”¨ï¼ˆæ¬¡è¦ï¼‰
    source_type?: 'standard' | 'pact' | 'supplier' | 'user_defined'
  }
}
```

### 5. å¼•ç”¨å°ˆæ¡ˆè³‡è¨Š (FactorUsageInfo)

```typescript
interface ProjectReference {
  project_id: string
  project_name: string
  project_type: 'L1' | 'L2' | 'L4'
  usage_count: number
  last_used_date: string
}

interface FactorUsageInfo {
  total_usage_count: number
  project_references: ProjectReference[]
  usage_summary: string
}
```

---

## é—œéµç¨‹å¼ç¢¼ä½ç½®

### æª”æ¡ˆçµæ§‹

```
src/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ page.tsx                          # ä¸»é é¢ï¼Œæ•´åˆæ‰€æœ‰æµç¨‹
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ImportCompositeToCentralModal.tsx # åŒ¯å…¥è¨­å®šå°è©±æ¡† â­
â”‚   â”œâ”€â”€ FactorDetail.tsx                  # ä¿‚æ•¸è©³æƒ…é¢æ¿ï¼ˆåŒ…å«æŒ‰éˆ•ï¼‰
â”‚   â””â”€â”€ FactorTable.tsx                   # ä¿‚æ•¸åˆ—è¡¨
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useComposites.ts                  # çµ„åˆä¿‚æ•¸æ“ä½œ Hook â­
â”‚   â”œâ”€â”€ useMockData.ts                    # è³‡æ–™ç®¡ç†èˆ‡ç‹€æ…‹ â­
â”‚   â””â”€â”€ useFactors.ts                     # ä¿‚æ•¸æŸ¥è©¢ Hook
â””â”€â”€ types/
    â””â”€â”€ types.ts                          # TypeScript é¡å‹å®šç¾©
```

### æ ¸å¿ƒå‡½æ•¸å°ç…§è¡¨

| åŠŸèƒ½ | å‡½æ•¸ | æª”æ¡ˆä½ç½® | è¡Œæ•¸ |
|------|------|---------|------|
| **è‡ªå»ºçµ„åˆä¿‚æ•¸åŒ¯å…¥** | | | |
| é–‹å•ŸåŒ¯å…¥å°è©±æ¡† | `handleImportToCentral()` | page.tsx | ç´„ 286-290 |
| åŸ·è¡ŒåŒ¯å…¥æ“ä½œ | `importCompositeToCentral()` | useComposites.ts | 259-355 |
| åŠ å…¥ä¸­å¤®åº«é™£åˆ— | `addImportedCompositeToCentral()` | useMockData.ts | 68-74 |
| æ›´æ–°è‡ªå»ºä¿‚æ•¸ç‹€æ…‹ | `updateUserDefinedCompositeFactor()` | useMockData.ts | 228-237 |
| åŒ¯å…¥è¨­å®šå°è©±æ¡† | `ImportCompositeToCentralModal` | ImportCompositeToCentralModal.tsx | å…¨æ–‡ |
| **å¸Œé”ä¿‚æ•¸åŒ¯å…¥** | | | |
| åŠ å…¥ä¸­å¤®åº« | `addStandardFactorToCentral()` | useMockData.ts | 87-122 |
| è™•ç†åŠ å…¥æ“ä½œ | `handleAddToCentral()` | page.tsx | ç´„ 330+ |
| **è³‡æ–™æŸ¥è©¢** | | | |
| ç²å–ä¸­å¤®åº«ä¿‚æ•¸ | `getCentralLibraryFactors()` | useMockData.ts | ç´„ 400+ |
| ç²å–è‡ªå»ºçµ„åˆä¿‚æ•¸ | `getUserDefinedCompositeFactors()` | useMockData.ts | ç´„ 200+ |

### é‡è¦ UI çµ„ä»¶ä½ç½®

#### 1. åŒ¯å…¥æŒ‰éˆ•ï¼ˆè‡ªå»ºçµ„åˆä¿‚æ•¸ï¼‰

```typescript
// src/components/FactorDetail.tsx
{isUserDefined && !isCentralLibrary && factor.type === 'composite_factor' && (
  <Button
    colorScheme={factor.imported_to_central ? "gray" : "brand"}
    size="sm"
    w="100%"
    onClick={() => onImportToCentral?.(factor)}
    isDisabled={factor.imported_to_central}
  >
    {factor.imported_to_central ? 'å·²åŒ¯å…¥ä¸­å¤®åº«' : 'åŒ¯å…¥åˆ°ä¸­å¤®åº«'}
  </Button>
)}
```

#### 2. åŠ å…¥ä¸­å¤®åº«æŒ‰éˆ•ï¼ˆå¸Œé”ä¿‚æ•¸ï¼‰

```typescript
// src/components/FactorDetail.tsx
{!isUserDefined && !isCentralLibrary && (
  <Button
    colorScheme="brand"
    size="sm"
    w="100%"
    onClick={() => onAddToCentral?.(factor)}
  >
    åŠ å…¥ä¸­å¤®åº«
  </Button>
)}
```

#### 3. ç¼ºå¤±æ¬„ä½è­¦å‘Š

```typescript
// src/components/ImportCompositeToCentralModal.tsx:363-433
{hasMissingFields ? (
  /* ç¼ºå¤±æ¬„ä½è­¦å‘Š */
  <VStack spacing={6} align="stretch" py={6}>
    <Alert status="warning" variant="left-accent" ...>
      <AlertIcon />
      <Text>ç¼ºå¤±å¿…è¦è³‡è¨Š</Text>
      <Text>è‡ªå»ºä¿‚æ•¸å°šæœªå¡«å¯«ä»¥ä¸‹è³‡è¨Šï¼Œç„¡æ³•åŒ¯å…¥ä¸­å¤®åº«ï¼š</Text>
      <VStack>
        {missingFields.map((field) => (
          <HStack key={field}>
            <Icon as={WarningIcon} />
            <Text>{field}</Text>
          </HStack>
        ))}
      </VStack>
    </Alert>
  </VStack>
) : (
  /* æ­£å¸¸çš„åŒ¯å…¥è¡¨å–® */
  ...
)}
```

---

## é©—æ”¶æ¨™æº–

### è‡ªå»ºçµ„åˆä¿‚æ•¸åŒ¯å…¥

#### âœ… è§¸ç™¼æ¢ä»¶
- [ ] æœªåŒ¯å…¥çš„çµ„åˆä¿‚æ•¸é¡¯ç¤ºè—è‰²ã€ŒåŒ¯å…¥åˆ°ä¸­å¤®åº«ã€æŒ‰éˆ•ï¼ˆå¯é»æ“Šï¼‰
- [ ] å·²åŒ¯å…¥çš„çµ„åˆä¿‚æ•¸é¡¯ç¤ºç°è‰²ã€Œå·²åŒ¯å…¥ä¸­å¤®åº«ã€æŒ‰éˆ•ï¼ˆç¦ç”¨ï¼‰
- [ ] é»æ“ŠæŒ‰éˆ•æ­£ç¢ºé–‹å•ŸåŒ¯å…¥è¨­å®šå°è©±æ¡†

#### âœ… å¿…è¦æ¬„ä½æª¢æŸ¥
- [ ] ç¼ºå°‘ã€Œåœ‹å®¶/å€åŸŸã€æ™‚é¡¯ç¤ºç¼ºå¤±è­¦å‘Šå°è©±æ¡†
- [ ] ç¼ºå°‘ã€Œå•Ÿç”¨æ—¥æœŸã€æ™‚é¡¯ç¤ºç¼ºå¤±è­¦å‘Šå°è©±æ¡†
- [ ] ç¼ºå¤±è­¦å‘Šå°è©±æ¡†æ¸…æ¥šåˆ—å‡ºæ‰€æœ‰ç¼ºå°‘çš„æ¬„ä½
- [ ] ã€Œè¿”å›ç·¨è¼¯ã€æŒ‰éˆ•å¯ä»¥é–‹å•Ÿçµ„åˆä¿‚æ•¸ç·¨è¼¯å™¨
- [ ] æ¬„ä½å®Œæ•´æ™‚ç›´æ¥é¡¯ç¤ºåŒ¯å…¥è¨­å®šè¡¨å–®

#### âœ… å°è©±æ¡†é¡¯ç¤ºï¼ˆåŸºæœ¬è³‡è¨Šï¼‰
- [ ] ä¿‚æ•¸åç¨±æ­£ç¢ºé¡¯ç¤º
- [ ] æè¿°æ­£ç¢ºé¡¯ç¤ºï¼ˆå¦‚æœ‰ï¼‰
- [ ] ä¿‚æ•¸å€¼ä»¥å¤§å­—é«”ç²—é«”é¡¯ç¤ºï¼Œæ ¼å¼æ­£ç¢º
- [ ] å•Ÿç”¨æ—¥æœŸæ­£ç¢ºé¡¯ç¤º
- [ ] åœ°ç†ç¯„åœè‡ªå‹•å°æ‡‰ä¸¦ä»¥ä¸­æ–‡é¡¯ç¤º
- [ ] ä¿‚æ•¸ä¾†æºæ­£ç¢ºå½™æ•´æ‰€æœ‰çµ„æˆä¿‚æ•¸çš„ä¾†æº
- [ ] å¼•ç”¨å°ˆæ¡ˆæ­£ç¢ºé¡¯ç¤ºï¼ˆåŒ…å«å°ˆæ¡ˆåç¨±å’Œé¡å‹æ¨™è¨˜ï¼‰

#### âœ… å°è©±æ¡†é¡¯ç¤ºï¼ˆè¨ˆç®—éç¨‹ï¼‰
- [ ] è¨ˆç®—å…¬å¼æ­£ç¢ºé¡¯ç¤º
- [ ] æ¯å€‹çµ„æˆä¿‚æ•¸çš„æ˜ç´°æ­£ç¢ºé¡¯ç¤ºï¼ˆåç¨±ã€æ¬Šé‡ã€è¨ˆç®—éç¨‹ï¼‰
- [ ] æœ€çµ‚çµ„åˆä¿‚æ•¸å€¼ä»¥å¤§å­—é«”ç²—é«”é¡¯ç¤ºï¼Œæ ¼å¼æ­£ç¢º

#### âœ… å°è©±æ¡†é¡¯ç¤ºï¼ˆé©ç”¨ç¯„åœï¼‰
- [ ] ISIC ç”¢æ¥­åˆ†é¡ä¸‹æ‹‰é¸å–®æ­£ç¢ºé¡¯ç¤º 19 å€‹é¸é …
- [ ] å·²é¸æ“‡çš„ ISIC åˆ†é¡ä»¥ Badge å½¢å¼é¡¯ç¤º
- [ ] å¯é»æ“Š Badge ç§»é™¤å·²é¸æ“‡çš„åˆ†é¡
- [ ] ç”Ÿå‘½é€±æœŸéšæ®µä»¥å¡ç‰‡å¼å¤šé¸é¡¯ç¤º 5 å€‹é¸é …
- [ ] å¡ç‰‡é¸ä¸­ç‹€æ…‹æ­£ç¢ºåˆ‡æ›ï¼ˆèƒŒæ™¯è‰²ã€é‚Šæ¡†ã€å‹¾é¸åœ–ç¤ºï¼‰
- [ ] æ•¸æ“šå“è³ªç­‰ç´šä»¥å¡ç‰‡å¼å–®é¸é¡¯ç¤º 2 å€‹é¸é …
- [ ] é è¨­é¸æ“‡ "Secondary"

#### âœ… è¡¨å–®é©—è­‰
- [ ] ISIC ç”¢æ¥­åˆ†é¡æœªé¸æ“‡æ™‚é¡¯ç¤ºè­¦å‘Š Toast
- [ ] ç”Ÿå‘½é€±æœŸéšæ®µæœªé¸æ“‡æ™‚é¡¯ç¤ºè­¦å‘Š Toast
- [ ] é©—è­‰é€šéå¾Œå¯ä»¥é»æ“Šã€Œç¢ºèªåŒ¯å…¥ã€

#### âœ… åŒ¯å…¥åŸ·è¡Œ
- [ ] é»æ“Šç¢ºèªåŒ¯å…¥å¾ŒæŒ‰éˆ•é¡¯ç¤º loading ç‹€æ…‹
- [ ] æˆåŠŸå¾Œé¡¯ç¤ºæˆåŠŸ Toast è¨Šæ¯
- [ ] è‡ªå‹•é—œé–‰å°è©±æ¡†

#### âœ… è³‡æ–™åŒæ­¥
- [ ] ä¸­å¤®åº«å‡ºç¾æ–°ä¿‚æ•¸
- [ ] ä¸­å¤®åº«ä¿‚æ•¸ ID æ­£ç¢ºï¼ˆä¸èˆ‡è‡ªå»ºä¿‚æ•¸ ID è¡çªï¼‰
- [ ] ä¸­å¤®åº«ä¿‚æ•¸åŒ…å«æ­£ç¢ºçš„ `source_composite_id`
- [ ] ä¸­å¤®åº«ä¿‚æ•¸åŒ…å«æ‰€æœ‰åŒ¯å…¥è¨­å®šè³‡è¨Š
- [ ] è‡ªå»ºä¿‚æ•¸ç‹€æ…‹æ­£ç¢ºæ›´æ–°ï¼š
  - [ ] `imported_to_central = true`
  - [ ] `central_library_id` æ­£ç¢ºè¨­å®š
  - [ ] `imported_at` æ­£ç¢ºè¨˜éŒ„
  - [ ] `last_synced_at` æ­£ç¢ºè¨˜éŒ„
  - [ ] `last_synced_version` æ­£ç¢ºè¨˜éŒ„

#### âœ… UI æ›´æ–°
- [ ] è‡ªå»ºä¿‚æ•¸åº«æŒ‰éˆ•è®Šç‚ºç°è‰²ã€Œå·²åŒ¯å…¥ä¸­å¤®åº«ã€ï¼ˆç¦ç”¨ï¼‰
- [ ] ä¸­å¤®ä¿‚æ•¸åº«åˆ—è¡¨æ­£ç¢ºåˆ·æ–°
- [ ] ä¸­å¤®ä¿‚æ•¸åº«ä¿‚æ•¸æ¨™è¨˜ç‚ºã€Œå¾è‡ªå»ºçµ„åˆä¿‚æ•¸åŒ¯å…¥ã€

### å¸Œé”ä¿‚æ•¸åŒ¯å…¥

#### âœ… è§¸ç™¼æ¢ä»¶
- [ ] å¸Œé”ä¿‚æ•¸é¡¯ç¤ºè—è‰²ã€ŒåŠ å…¥ä¸­å¤®åº«ã€æŒ‰éˆ•ï¼ˆå¯é»æ“Šï¼‰
- [ ] é»æ“ŠæŒ‰éˆ•ç„¡éœ€å½ˆå‡ºå°è©±æ¡†

#### âœ… åŠ å…¥åŸ·è¡Œ
- [ ] é»æ“ŠæŒ‰éˆ•å¾Œé¡¯ç¤ºæˆåŠŸ Toast è¨Šæ¯
- [ ] ä¸­å¤®ä¿‚æ•¸åº«åˆ—è¡¨æ­£ç¢ºåˆ·æ–°
- [ ] è©²å¸Œé”ä¿‚æ•¸å‡ºç¾åœ¨ä¸­å¤®åº«åˆ—è¡¨ä¸­

#### âœ… è³‡æ–™åŒæ­¥
- [ ] å¦‚æœä¿‚æ•¸ä¹‹å‰è¢«ç§»é™¤éï¼Œå¾ `removedFromCentralIds` ç§»é™¤
- [ ] å¸Œé”ä¿‚æ•¸æœ¬èº«åœ¨å¸Œé”ä¿‚æ•¸åº«ä¸­ç„¡è®ŠåŒ–

### æ•ˆèƒ½é©—æ”¶

- [ ] å°è©±æ¡†é–‹å•Ÿæ™‚é–“ < 300ms
- [ ] åŒ¯å…¥æ“ä½œå®Œæˆæ™‚é–“ < 2 ç§’
- [ ] åˆ—è¡¨åˆ·æ–°æ™‚é–“ < 500ms

### ä½¿ç”¨è€…é«”é©—é©—æ”¶

- [ ] è‡ªå‹•å¸¶å…¥è³‡è¨Šæº–ç¢ºï¼Œæ¸›å°‘æ‰‹å‹•è¼¸å…¥
- [ ] é©—è­‰è¨Šæ¯æ¸…æ™°æ˜“æ‡‚
- [ ] æ“ä½œæµç¨‹é †æš¢ï¼Œç„¡å¡é “
- [ ] Toast è¨Šæ¯é¡¯ç¤ºæ™‚æ©Ÿæ­£ç¢º
- [ ] ç¼ºå¤±æ¬„ä½è­¦å‘Šæ¸…æ¥šæ˜ç¢ºï¼Œæä¾›æ˜ç¢ºçš„æ“ä½œæŒ‡å¼•

---

## å¸¸è¦‹å•é¡Œèˆ‡è™•ç†

### Q1: ç‚ºä»€éº¼è‡ªå»ºçµ„åˆä¿‚æ•¸éœ€è¦å¡«å¯«è¨­å®šï¼Œè€Œå¸Œé”ä¿‚æ•¸ä¸éœ€è¦ï¼Ÿ

**A**:
- **è‡ªå»ºçµ„åˆä¿‚æ•¸**ï¼šç”±ä½¿ç”¨è€…è‡ªè¡Œå»ºç«‹ï¼Œç¼ºå°‘ç”¢æ¥­åˆ†é¡ã€ç”Ÿå‘½é€±æœŸéšæ®µç­‰æ¨™æº–åŒ–è³‡è¨Šã€‚åŒ¯å…¥åˆ°ä¸­å¤®åº«æ™‚éœ€è¦è£œå……é€™äº›è³‡è¨Šï¼Œä»¥ç¢ºä¿å…¶ä»–ä½¿ç”¨è€…èƒ½æ­£ç¢ºä½¿ç”¨ã€‚
- **å¸Œé”ä¿‚æ•¸**ï¼šä¾†è‡ªæ¨™æº–è³‡æ–™åº«ï¼ˆå¦‚ TW2050ï¼‰ï¼Œæœ¬èº«å·²åŒ…å«å®Œæ•´çš„å…ƒæ•¸æ“šï¼ˆä¾†æºã€å¹´ä»½ã€å€åŸŸã€æ–¹æ³•ç­‰ï¼‰ï¼Œç„¡éœ€é¡å¤–è¨­å®šå³å¯ç›´æ¥åŠ å…¥ä¸­å¤®åº«ã€‚

### Q2: ç‚ºä»€éº¼ä¸­å¤®åº«ä¿‚æ•¸çš„ ID è¦ç¨ç«‹ï¼Œä¸ä½¿ç”¨è‡ªå»ºä¿‚æ•¸çš„ IDï¼Ÿ

**A**:
- é¿å… ID è¡çªï¼šä¸­å¤®åº«å¯èƒ½åŒ…å«ä¾†è‡ªå¤šå€‹ä¾†æºçš„ä¿‚æ•¸ï¼ˆè‡ªå»ºçµ„åˆä¿‚æ•¸ã€å¸Œé”ä¿‚æ•¸ã€PACT ä¿‚æ•¸ç­‰ï¼‰ï¼Œä½¿ç”¨ç¨ç«‹ ID å¯é¿å…è¡çªã€‚
- æ”¯æŒåŒä¸€è‡ªå»ºä¿‚æ•¸çš„å¤šæ¬¡åŒ¯å…¥ï¼ˆæœªä¾†åŠŸèƒ½ï¼‰ï¼šå¦‚æœéœ€è¦åŒ¯å…¥åŒä¸€ä¿‚æ•¸çš„ä¸åŒç‰ˆæœ¬æˆ–ä¸åŒè¨­å®šï¼Œç¨ç«‹ ID å¯ä»¥æ”¯æŒã€‚

### Q3: åœ°ç†ç¯„åœç‚ºä»€éº¼è‡ªå‹•å°æ‡‰è€Œä¸æ˜¯è®“ä½¿ç”¨è€…å¡«å¯«ï¼Ÿ

**A**:
- æ¸›å°‘é‡è¤‡è¼¸å…¥ï¼šè‡ªå»ºä¿‚æ•¸å·²ç¶“å¡«å¯«é `region`ï¼Œè‡ªå‹•å°æ‡‰å¯é¿å…ä½¿ç”¨è€…é‡è¤‡é¸æ“‡ã€‚
- ç¢ºä¿ä¸€è‡´æ€§ï¼šç³»çµ±ä½¿ç”¨æ¨™æº–åŒ–çš„åœ°ç†ç¯„åœå€¼ï¼ˆtaiwan, asia, europe ç­‰ï¼‰ï¼Œè‡ªå‹•å°æ‡‰å¯ç¢ºä¿è³‡æ–™æ ¼å¼ä¸€è‡´ã€‚
- æå‡ä½¿ç”¨è€…é«”é©—ï¼šæ¸›å°‘å¡«å¯«æ­¥é©Ÿï¼ŒåŠ å¿«åŒ¯å…¥æµç¨‹ã€‚

### Q4: ç‚ºä»€éº¼ ISIC ç”¢æ¥­åˆ†é¡å’Œç”Ÿå‘½é€±æœŸéšæ®µæ˜¯å¿…å¡«çš„ï¼Ÿ

**A**:
- **ISIC ç”¢æ¥­åˆ†é¡**ï¼šé€™æ˜¯åœ‹éš›æ¨™æº–ç”¢æ¥­åˆ†é¡ï¼Œæ˜ç¢ºç•Œå®šä¿‚æ•¸çš„é©ç”¨ç¯„åœã€‚ä¸­å¤®åº«ä¸­çš„ä¿‚æ•¸å¿…é ˆæœ‰æ¸…æ¥šçš„ç”¢æ¥­åˆ†é¡ï¼Œæ‰èƒ½è®“ä½¿ç”¨è€…å¿«é€Ÿæ‰¾åˆ°é©åˆå…¶ç”¢æ¥­çš„ä¿‚æ•¸ã€‚
- **ç”Ÿå‘½é€±æœŸéšæ®µ**ï¼šæ˜ç¢ºä¿‚æ•¸é©ç”¨çš„ç”Ÿå‘½é€±æœŸéšæ®µï¼Œé¿å…ä½¿ç”¨è€…åœ¨éŒ¯èª¤çš„éšæ®µä½¿ç”¨ä¿‚æ•¸ï¼ˆä¾‹å¦‚ï¼ŒåŸæ–™å–å¾—éšæ®µçš„ä¿‚æ•¸ä¸æ‡‰ç”¨æ–¼ä½¿ç”¨éšæ®µï¼‰ã€‚

### Q5: çµ„æˆå‚™è¨» (composition_notes) çš„å…§å®¹åŒ…å«ä»€éº¼ï¼Ÿ

**A**:
ç›®å‰åŒ…å«**çµ„æˆè³‡è¨Š**ï¼š
- çµ„æˆä¿‚æ•¸æ•¸é‡
- è¨ˆç®—æ–¹å¼ï¼ˆæ¬Šé‡å¹³å‡æˆ–æ¬Šé‡åŠ ç¸½ï¼‰
- æ‰€æœ‰çµ„æˆä¿‚æ•¸çš„åç¨±

**ç¯„ä¾‹**ï¼š
```
ã€çµ„æˆè³‡è¨Šã€‘
æœ¬çµ„åˆä¿‚æ•¸ç”± 3 å€‹åŸºç¤ä¿‚æ•¸çµ„æˆï¼Œæ¡ç”¨æ¬Šé‡å¹³å‡è¨ˆç®—æ–¹å¼ã€‚
çµ„æˆï¼šé›»åŠ›ç”Ÿç”¢ã€å¤©ç„¶æ°£ç‡ƒç‡’ã€æŸ´æ²¹é‹è¼¸ã€‚
```

### Q6: å¦‚æœåŒ¯å…¥æ™‚ç¼ºå°‘å¿…è¦æ¬„ä½æœƒæ€æ¨£ï¼Ÿ

**A**:
ç³»çµ±æœƒæª¢æŸ¥ä»¥ä¸‹å¿…è¦æ¬„ä½ï¼š
- åœ‹å®¶/å€åŸŸ (`region`)
- å•Ÿç”¨æ—¥æœŸ (`enabledDate`)

å¦‚æœç¼ºå°‘ä»»ä¸€æ¬„ä½ï¼Œæœƒé¡¯ç¤º**ç¼ºå¤±è­¦å‘Šå°è©±æ¡†**ï¼Œå…§å®¹åŒ…æ‹¬ï¼š
- æ¸…æ¥šåˆ—å‡ºç¼ºå°‘çš„æ¬„ä½
- æä¾›ã€Œè¿”å›ç·¨è¼¯ã€æŒ‰éˆ•ï¼Œå¯ç›´æ¥é–‹å•Ÿçµ„åˆä¿‚æ•¸ç·¨è¼¯å™¨è£œå……æ¬„ä½
- é¡¯ç¤ºä¿‚æ•¸é è¦½è³‡è¨Šï¼ˆåç¨±ã€è¨ˆç®—å€¼ï¼‰

ä½¿ç”¨è€…å¯ä»¥ï¼š
1. é»æ“Šã€Œè¿”å›ç·¨è¼¯ã€â†’ é–‹å•Ÿç·¨è¼¯å™¨ â†’ è£œå……æ¬„ä½ â†’ å†æ¬¡å˜—è©¦åŒ¯å…¥
2. é»æ“Šã€Œå–æ¶ˆã€â†’ æ”¾æ£„åŒ¯å…¥

### Q7: å¸Œé”ä¿‚æ•¸å¦‚ä½•åˆ¤æ–·æ˜¯å¦å·²åœ¨ä¸­å¤®åº«ï¼Ÿ

**A**:
ç³»çµ±ä½¿ç”¨ `removedFromCentralIds` Set ä¾†è¿½è¹¤å·²å¾ä¸­å¤®åº«ç§»é™¤çš„ä¿‚æ•¸ IDï¼š
- å¦‚æœä¿‚æ•¸ ID **ä¸åœ¨** `removedFromCentralIds` ä¸­ï¼Œè©²ä¿‚æ•¸å°±æœƒå‡ºç¾åœ¨ä¸­å¤®åº«è¦–åœ–
- å¦‚æœä¿‚æ•¸ ID **åœ¨** `removedFromCentralIds` ä¸­ï¼Œè©²ä¿‚æ•¸æœƒè¢«éæ¿¾æ‰ï¼Œä¸é¡¯ç¤ºåœ¨ä¸­å¤®åº«

**åŠ å…¥æ“ä½œ**ï¼š
- å¦‚æœä¿‚æ•¸åœ¨ç§»é™¤åˆ—è¡¨ä¸­ï¼šå¾åˆ—è¡¨ç§»é™¤ â†’ ä¿‚æ•¸é‡æ–°å‡ºç¾åœ¨ä¸­å¤®åº«
- å¦‚æœä¿‚æ•¸ä¸åœ¨ç§»é™¤åˆ—è¡¨ä¸­ï¼šç¢ºèªå·²åœ¨ä¸­å¤®åº« â†’ é¡¯ç¤ºè¨Šæ¯

### Q8: ä¿‚æ•¸ä¾†æºå¦‚ä½•å½™æ•´ï¼Ÿ

**A**:
ç³»çµ±æœƒéæ­·çµ„åˆä¿‚æ•¸çš„æ‰€æœ‰çµ„æˆä¿‚æ•¸ï¼Œå½™æ•´å®ƒå€‘çš„ä¾†æºè³‡è¨Šï¼š

1. å„ªå…ˆä½¿ç”¨ `emission_factor.source`
2. å…¶æ¬¡ä½¿ç”¨ `emission_factor.source_ref`
3. å¦‚æœéƒ½æ²’æœ‰ï¼Œé¡¯ç¤ºã€ŒæœªçŸ¥ä¾†æºã€

**å»é‡è¤‡**ï¼š
- ä½¿ç”¨ JavaScript çš„ `filter` + `indexOf` é€²è¡Œå»é‡
- å¤šå€‹ä¾†æºæ™‚ï¼Œç”¨é “è™Ÿï¼ˆã€ï¼‰åˆ†éš”

**ç¯„ä¾‹**ï¼š
```
å–®ä¸€ä¾†æºï¼šTW2050 v2.0
å¤šå€‹ä¾†æºï¼šTW2050 v2.0ã€IPCC 2006ã€è‡ªå»ºä¿‚æ•¸
```

---

## æœªä¾†è¦åŠƒ

### Phase 2 åŠŸèƒ½

**è‡ªå»ºçµ„åˆä¿‚æ•¸**ï¼š
- [ ] æ”¯æŒç·¨è¼¯ä¸­å¤®åº«ä¿‚æ•¸çš„è¨­å®šè³‡è¨Šï¼ˆISICã€ç”Ÿå‘½é€±æœŸéšæ®µç­‰ï¼‰
- [ ] ç‰ˆæœ¬åŒæ­¥ï¼šè‡ªå»ºä¿‚æ•¸æ›´æ–°å¾Œï¼Œæç¤ºä½¿ç”¨è€…åŒæ­¥åˆ°ä¸­å¤®åº«
- [ ] ç‰ˆæœ¬å·®ç•°æ¯”å°ï¼šé¡¯ç¤ºè‡ªå»ºä¿‚æ•¸èˆ‡ä¸­å¤®åº«ä¿‚æ•¸çš„ç‰ˆæœ¬å·®ç•°

**å¸Œé”ä¿‚æ•¸**ï¼š
- [ ] æ‰¹æ¬¡åŠ å…¥ï¼šä¸€æ¬¡é¸æ“‡å¤šå€‹å¸Œé”ä¿‚æ•¸åŠ å…¥ä¸­å¤®åº«
- [ ] è‡ªå‹•æ¨è–¦ï¼šæ ¹æ“šä½¿ç”¨è€…çš„å°ˆæ¡ˆé¡å‹ï¼Œè‡ªå‹•æ¨è–¦é©åˆçš„å¸Œé”ä¿‚æ•¸

**å…±é€š**ï¼š
- [ ] è³‡æ–™åº«æŒä¹…åŒ–ï¼šç›®å‰ä½¿ç”¨å…¨å±€è®Šæ•¸ï¼Œéœ€æ”¹ç‚ºè³‡æ–™åº«å­˜å„²
- [ ] å¯©è¨ˆæ—¥èªŒï¼šè¨˜éŒ„æ‰€æœ‰åŒ¯å…¥æ“ä½œï¼ŒåŒ…å«æ™‚é–“ã€ä½¿ç”¨è€…ã€è®Šæ›´å…§å®¹
- [ ] æ¬Šé™æ§åˆ¶ï¼šé™åˆ¶èª°å¯ä»¥åŒ¯å…¥åˆ°ä¸­å¤®åº«

---

## è®Šæ›´æ­·å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | è®Šæ›´å…§å®¹ |
|------|------|------|---------|
| v1.0 | 2025-11-17 | ç”¢å“åœ˜éšŠ | åˆç‰ˆå»ºç«‹ï¼Œçµ±æ•´è‡ªå»ºçµ„åˆä¿‚æ•¸å’Œå¸Œé”ä¿‚æ•¸åŒ¯å…¥ä¸­å¤®åº«çš„å®Œæ•´æµç¨‹ |

---

**æ–‡ä»¶çµæŸ**
