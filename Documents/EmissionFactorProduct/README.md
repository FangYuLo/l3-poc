# ç¢³æ’æ”¾ä¿‚æ•¸ç®¡ç†ç³»çµ± (Emission Factor Product)
## ç”¢å“åŠŸèƒ½èˆ‡ç³»çµ±æ¶æ§‹èªªæ˜æ–‡ä»¶

---

## ğŸ“‹ ç›®éŒ„
1. [ç”¢å“æ¦‚è¿°](#ç”¢å“æ¦‚è¿°)
2. [æ ¸å¿ƒåŠŸèƒ½æ¶æ§‹](#æ ¸å¿ƒåŠŸèƒ½æ¶æ§‹)
3. [ç³»çµ±æŠ€è¡“æ¶æ§‹](#ç³»çµ±æŠ€è¡“æ¶æ§‹)
4. [è³‡æ–™æ¨¡å‹è¨­è¨ˆ](#è³‡æ–™æ¨¡å‹è¨­è¨ˆ)
5. [å¿«é€Ÿé–‹å§‹](#å¿«é€Ÿé–‹å§‹)
6. [é–‹ç™¼æŒ‡å—](#é–‹ç™¼æŒ‡å—)

---

## ç”¢å“æ¦‚è¿°

### ç³»çµ±å®šä½
é¡ **Zotero æ›¸ç›®ç®¡ç†ç³»çµ±**é¢¨æ ¼çš„ä¼æ¥­ç´šç¢³æ’æ”¾ä¿‚æ•¸ç®¡ç†å¹³å°ï¼Œæ¡ç”¨**ä¸‰æ¬„å¼ä»‹é¢è¨­è¨ˆ**ï¼Œå°ˆç‚ºçµ„ç¹”ç¢³ç›¤æŸ¥ï¼ˆL1ï¼‰èˆ‡ç”¢å“ç¢³è¶³è·¡ï¼ˆL2ï¼‰è¨ˆç®—æä¾›ä¸€ç«™å¼ä¿‚æ•¸ç®¡ç†è§£æ±ºæ–¹æ¡ˆã€‚

### è¨­è¨ˆç†å¿µ
- **æ›¸ç›®ç®¡ç†é¢¨æ ¼**ï¼šå€Ÿé‘’ Zotero çš„å±¤ç´šå°èˆªèˆ‡è©³æƒ…æª¢è¦–æ¨¡å¼
- **é…ç½®é©…å‹•**ï¼šè¡¨æ ¼æ¬„ä½èˆ‡é¡¯ç¤ºé‚è¼¯å®Œå…¨é…ç½®åŒ–ï¼Œæ”¯æ´å¿«é€Ÿæ“´å±•
- **è³‡æ–™ä¸­å¿ƒåŒ–**ï¼šçµ±ä¸€çš„ Mock è³‡æ–™ç®¡ç†å±¤ï¼Œç¢ºä¿è³‡æ–™ä¸€è‡´æ€§
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šä¿‚æ•¸ç‰ˆæœ¬è¿½è¹¤èˆ‡å°ˆæ¡ˆç‰ˆæœ¬é–å®šæ©Ÿåˆ¶

### æ ¸å¿ƒåƒ¹å€¼
1. **å¤§è¦æ¨¡ä¿‚æ•¸ç®¡ç†**ï¼šæ¨¡æ“¬ 8-10 è¬ç­†æ’æ”¾ä¿‚æ•¸è³‡æ–™åº«
2. **å¤šæºè³‡æ–™æ•´åˆ**ï¼šæ¨™æº–è³‡æ–™åº« + PACTäº¤æ› + ä¾›æ‡‰å•†ä¿‚æ•¸ + è‡ªå»ºä¿‚æ•¸
3. **æ™ºæ…§è¿½è¹¤ç³»çµ±**ï¼šä¿‚æ•¸ä½¿ç”¨è¿½è¹¤ã€å°ˆæ¡ˆå¼•ç”¨åˆ†æã€ç‰ˆæœ¬æ­·å²
4. **å°ˆæ¥­ç¢³ç®¡ç†**ï¼šæ”¯æ´ ISO 14064ã€ISO 14067 æ¨™æº–çš„çµ„ç¹”èˆ‡ç”¢å“ç¢³ç›¤æŸ¥

---

## æ ¸å¿ƒåŠŸèƒ½æ¶æ§‹

### ğŸ—ï¸ ä¸‰æ¬„å¼ä½¿ç”¨è€…ä»‹é¢

#### å·¦æ¬„ - æ¨¹ç‹€å°èˆª (SidebarTree)
```
çµæ§‹å±¤ç´šï¼š
â”œâ”€â”€ ä¸­å¤®ä¿‚æ•¸åº«
â”‚   â””â”€â”€ å…¨åº«æœå°‹
â”œâ”€â”€ è‡ªå»ºä¿‚æ•¸
â”œâ”€â”€ è³‡æ–™é›†ï¼ˆå‹•æ…‹æ–°å¢ï¼‰
â”‚   â”œâ”€â”€ è³‡æ–™é›†A
â”‚   â””â”€â”€ è³‡æ–™é›†B
â””â”€â”€ å°ˆæ¡ˆ
    â”œâ”€â”€ L4 - ä¾›æ‡‰å•†ä¿‚æ•¸
    â”œâ”€â”€ L2 - ç”¢å“ç¢³è¶³è·¡
    â”‚   â”œâ”€â”€ PACTäº¤æ›
    â”‚   â”œâ”€â”€ ç”¢å“A1 - æ™ºæ…§å‹æ‰‹æ©Ÿ
    â”‚   â”‚   â”œâ”€â”€ åŸç‰©æ–™æ¡è³¼
    â”‚   â”‚   â”œâ”€â”€ è£½ç¨‹åŠ å·¥
    â”‚   â”‚   â””â”€â”€ åŒ…è£é‹è¼¸
    â”‚   â”œâ”€â”€ ç”¢å“A2 - LEDç‡ˆå…·
    â”‚   â””â”€â”€ ç”¢å“A3 - ç­†è¨˜å‹é›»è…¦
    â””â”€â”€ L1 - çµ„ç¹”ç¢³ç›¤æŸ¥
        â”œâ”€â”€ 2024å¹´åº¦ç›¤æŸ¥
        â”‚   â”œâ”€â”€ Scope 1 ç›´æ¥æ’æ”¾
        â”‚   â”œâ”€â”€ Scope 2 é–“æ¥æ’æ”¾
        â”‚   â””â”€â”€ Scope 3 å…¶ä»–é–“æ¥
        â”œâ”€â”€ 2023å¹´åº¦ç›¤æŸ¥
        â””â”€â”€ 2022å¹´åº¦ç›¤æŸ¥
```

**ç‰¹è‰²åŠŸèƒ½ï¼š**
- å‹•æ…‹çµ±è¨ˆï¼šæ¯å€‹ç¯€é»é¡¯ç¤ºåŒ…å«çš„ä¿‚æ•¸æ•¸é‡
- è‡ªè¨‚åœ–ç¤ºï¼šæ ¹æ“šç¯€é»é¡å‹é¡¯ç¤ºä¸åŒ SVG åœ–ç¤º
- è³‡æ–™é›†ç®¡ç†ï¼šé»æ“Š "+" æ–°å¢è‡ªè¨‚è³‡æ–™é›†
- å±•é–‹æ”¶åˆï¼šæ”¯æ´å¤šå±¤ç´šå±•é–‹ç‹€æ…‹è¨˜æ†¶

#### ä¸­æ¬„ - æ™ºæ…§ä¿‚æ•¸åˆ—è¡¨ (FactorTable)

**é…ç½®é©…å‹•è¡¨æ ¼ç³»çµ±** (`src/config/tableColumns.tsx`)ï¼š
```
æ”¯æ´çš„è¡¨æ ¼æ¨¡å¼ï¼š
1. favorites: ä¸­å¤®ä¿‚æ•¸åº«ï¼ˆå«å¼•ç”¨å°ˆæ¡ˆè¿½è¹¤ï¼‰
2. user_defined: è‡ªå»ºä¿‚æ•¸ï¼ˆçµ„åˆä¿‚æ•¸ï¼‰
3. pact: PACTäº¤æ›ä¿‚æ•¸
4. supplier: ä¾›æ‡‰å•†ä¿‚æ•¸
5. dataset: å‹•æ…‹è³‡æ–™é›†
6. global_search: å…¨åº«æœå°‹ï¼ˆå«å¤šç¶­ç¯©é¸ï¼‰
7. organizational_inventory: L1çµ„ç¹”ç›¤æŸ¥
8. product_carbon_footprint: L2ç”¢å“ç¢³è¶³è·¡
9. project_overview: L2å°ˆæ¡ˆæ¦‚è¦½
10. inventory_overview: L1ç›¤æŸ¥æ¦‚è¦½
```

**é€²éšåŠŸèƒ½ï¼š**
- **æœå°‹éæ¿¾**ï¼šé—œéµå­—å³æ™‚æœå°‹
- **åˆ†é å°èˆª**ï¼šæ”¯æ´ 10/20/50 ç­†/é ï¼Œé ç¢¼è·³è½‰
- **å¤šç¶­ç¯©é¸**ï¼ˆå…¨åº«æœå°‹ï¼‰ï¼šåœ°å€/å¹´ä»½/å–®ä½/æ–¹æ³•å­¸/ä¾†æºé¡å‹
- **ç©ºç‹€æ…‹è™•ç†**ï¼šè³‡æ–™é›†ç‚ºç©ºæ™‚é¡¯ç¤ºå¼•å°æç¤º

#### å³æ¬„ - è©³æƒ…é¢æ¿ (FactorDetail)

**æ»‘å…¥å¼è©³æƒ…æª¢è¦–**ï¼š
```
é¡¯ç¤ºå…§å®¹ï¼š
â”œâ”€â”€ åŸºæœ¬è³‡è¨Š
â”‚   â”œâ”€â”€ ä¿‚æ•¸åç¨±
â”‚   â”œâ”€â”€ æ’æ”¾ä¿‚æ•¸å€¼
â”‚   â”œâ”€â”€ å–®ä½
â”‚   â””â”€â”€ GWPæ–¹æ³•å­¸
â”œâ”€â”€ ä¾†æºè³‡è¨Š
â”‚   â”œâ”€â”€ è³‡æ–™ä¾†æº
â”‚   â”œâ”€â”€ åœ‹å®¶/åœ°å€
â”‚   â”œâ”€â”€ æœ‰æ•ˆæ—¥æœŸ
â”‚   â””â”€â”€ ç‰ˆæœ¬è™Ÿ
â”œâ”€â”€ çµ„åˆä¿‚æ•¸å°ˆå±¬
â”‚   â”œâ”€â”€ è¨ˆç®—å…¬å¼é¡å‹
â”‚   â”œâ”€â”€ çµ„æˆä¿‚æ•¸åˆ—è¡¨
â”‚   â””â”€â”€ æ¬Šé‡è¨­å®š
â”œâ”€â”€ æ•¸æ“šå“è³ª
â”‚   â”œâ”€â”€ å“è³ªç­‰ç´š
â”‚   â”œâ”€â”€ é©—è­‰ç‹€æ…‹
â”‚   â””â”€â”€ å“è³ªè©•åˆ†
â””â”€â”€ ä½¿ç”¨è¿½è¹¤
    â”œâ”€â”€ å¼•ç”¨å°ˆæ¡ˆåˆ—è¡¨
    â”œâ”€â”€ ä½¿ç”¨æ¬¡æ•¸çµ±è¨ˆ
    â””â”€â”€ æœ€å¾Œä½¿ç”¨æ—¥æœŸ
```

---

### ğŸ“Š ç¶œåˆä¿‚æ•¸ç®¡ç†

#### ä¸­å¤®ä¿‚æ•¸åº« (Central Library)

**ä¿‚æ•¸ä¾†æºæ•´åˆ** (`src/hooks/useMockData.ts`):
```typescript
getCentralLibraryFactors() {
  // 1. å°ˆæ¡ˆå·²ä½¿ç”¨çš„æ¨™æº–ä¿‚æ•¸
  // 2. ç”¢å“ç¢³è¶³è·¡ä¿‚æ•¸
  // 3. å¾ç”¢å“ç¢³è¶³è·¡åŒ¯å…¥çš„ä¿‚æ•¸
  // åˆä½µå»é‡ + æŒ‰ä½¿ç”¨æ¬¡æ•¸æ’åº
}
```

**å¼•ç”¨è¿½è¹¤ç³»çµ±** (`src/data/factorProjectMapping.ts`):
- è¿½è¹¤ä¿‚æ•¸åœ¨å„å°ˆæ¡ˆä¸­çš„ä½¿ç”¨æƒ…æ³
- æ ¼å¼åŒ–é¡¯ç¤ºï¼šã€Œç”¨æ–¼ 2 å€‹å°ˆæ¡ˆï¼šç”¢å“ç¢³è¶³è·¡-æ™ºæ…§å‹æ‰‹æ©Ÿ(1æ¬¡)ã€çµ„ç¹”ç›¤æŸ¥-2024(3æ¬¡)ã€
- æ”¯æ´ç‰ˆæœ¬é–å®šæ©Ÿåˆ¶

#### ç‰ˆæœ¬æ§åˆ¶æ©Ÿåˆ¶
- å°ˆæ¡ˆå»ºç«‹æ™‚é–å®šä¿‚æ•¸ç‰ˆæœ¬
- å³ä½¿ä¿‚æ•¸è³‡æ–™åº«æ›´æ–°ï¼Œå°ˆæ¡ˆè¨ˆç®—çµæœä¸è®Š
- æ”¯æ´ç‰ˆæœ¬å‡ç´šæç¤ºèˆ‡ä¸€éµæ›´æ–°

---

### âš™ï¸ è‡ªå»ºçµ„åˆä¿‚æ•¸

#### çµ„åˆä¿‚æ•¸ç·¨è¼¯å™¨ (CompositeEditorDrawer)

**è¨ˆç®—æ¨¡å¼**ï¼š
```typescript
formula_type: 'sum' | 'weighted'

// è¨ˆç®—é‚è¼¯
computed_value =
  formula_type === 'sum'
    ? Î£(component.value Ã— component.weight)
    : Î£(component.value Ã— component.weight) / Î£(weight)
```

**ä½¿ç”¨æµç¨‹**ï¼š
1. é¸æ“‡åŸºç¤ä¿‚æ•¸ï¼ˆå¾å…¨åº«æœå°‹ï¼‰
2. è¨­å®šæ¬Šé‡å€¼
3. é¸æ“‡è¨ˆç®—å…¬å¼ï¼ˆåŠ ç¸½ or å¹³å‡ï¼‰
4. å³æ™‚é è¦½è¨ˆç®—çµæœ
5. å„²å­˜çµ„åˆä¿‚æ•¸

---

### ğŸ“ å°ˆæ¡ˆç®¡ç†ç³»çµ±

#### L2 - ç”¢å“ç¢³è¶³è·¡å°ˆæ¡ˆ

**å°ˆæ¡ˆæ¦‚è¦½è¦–åœ–** (`ProjectOverviewView.tsx`):
```
é¡¯ç¤ºå…§å®¹ï¼š
â”œâ”€â”€ å°ˆæ¡ˆè³‡è¨Šå¡ç‰‡
â”‚   â”œâ”€â”€ å°ˆæ¡ˆåç¨±: L2 - ç”¢å“ç¢³è¶³è·¡
â”‚   â”œâ”€â”€ æœ€å¾ŒåŒ¯å…¥æ™‚é–“: 2024-03-15 14:30:25
â”‚   â”œâ”€â”€ ç‰ˆæœ¬: v2024.1
â”‚   â”œâ”€â”€ ç‹€æ…‹: ğŸ”’å·²é–å®š
â”‚   â”œâ”€â”€ ç”¢å“æ•¸é‡: 3 å€‹
â”‚   â”œâ”€â”€ PACTç”¢å“: 8 å€‹
â”‚   â””â”€â”€ [æ‰‹å‹•åŒæ­¥ L2 å°ˆæ¡ˆ] æŒ‰éˆ•
â””â”€â”€ ç”¢å“çµ±æ•´è¡¨
    â”œâ”€â”€ æœå°‹èˆ‡ç¯©é¸
    â””â”€â”€ ç”¢å“åˆ—è¡¨ï¼ˆåç¨±ã€ç¢³è¶³è·¡å€¼ã€ç‹€æ…‹ï¼‰
```

**ç”¢å“ç¢³è¶³è·¡æ‘˜è¦å¡ç‰‡** (`ProductCarbonFootprintCard.tsx`):
```
â”œâ”€â”€ ç¸½ç¢³è¶³è·¡å€¼: 45.8 kg COâ‚‚e/æ”¯
â”œâ”€â”€ åŠŸèƒ½å–®ä½: 1 æ”¯ï¼ˆå«åŒ…è£ï¼Œä½¿ç”¨3å¹´ï¼‰
â”œâ”€â”€ è¨ˆç®—æ¨™æº–: ISO 14067:2018
â”œâ”€â”€ éšæ®µåˆ†è§£åœ“é¤…åœ–
â”‚   â”œâ”€â”€ åŸç‰©æ–™: 40% (18.5 kg)
â”‚   â”œâ”€â”€ è£½é€ : 27% (12.3 kg)
â”‚   â”œâ”€â”€ é…é€: 5% (2.1 kg)
â”‚   â”œâ”€â”€ ä½¿ç”¨: 21% (9.8 kg)
â”‚   â””â”€â”€ å»¢æ£„: 7% (3.1 kg)
â””â”€â”€ [åŒ¯å…¥ä¸­å¤®ä¿‚æ•¸åº«] æŒ‰éˆ•
```

**åŒ¯å…¥ä¸­å¤®åº«åŠŸèƒ½**ï¼š
- å¡«å¯«é©ç”¨ç¯„åœï¼ˆç”¢å“é¡åˆ¥ã€åœ°ç†ç¯„åœã€æœ‰æ•ˆæœŸé™ï¼‰
- è¨­å®šè¨ˆç®—é‚Šç•Œï¼ˆç³»çµ±é‚Šç•Œã€æ’é™¤é …ç›®ï¼‰
- æ¨™ç¤ºæ•¸æ“šå“è³ªï¼ˆå¯¦æ¸¬æ•¸æ“šä½”æ¯”ã€æ¬¡ç´šè³‡æ–™ä½”æ¯”ï¼‰
- è½‰æ›ç‚ºæ¨™æº– EmissionFactor æ ¼å¼
- è‡ªå‹•åŠ å…¥ä¸­å¤®ä¿‚æ•¸åº«

#### L1 - çµ„ç¹”ç¢³ç›¤æŸ¥å°ˆæ¡ˆ

**ç›¤æŸ¥æ¦‚è¦½è¦–åœ–** (`OrganizationalInventoryOverview.tsx`):
```
é¡¯ç¤ºå…§å®¹ï¼š
â”œâ”€â”€ å°ˆæ¡ˆè³‡è¨Šå¡ç‰‡
â”‚   â”œâ”€â”€ å°ˆæ¡ˆåç¨±: L1 - çµ„ç¹”ç¢³ç›¤æŸ¥
â”‚   â”œâ”€â”€ æœ€å¾ŒåŒ¯å…¥æ™‚é–“: 2024-03-15 14:30:25
â”‚   â”œâ”€â”€ ç‹€æ…‹: ğŸ”’å·²é–å®š
â”‚   â”œâ”€â”€ ç›¤æŸ¥å¹´åº¦æ•¸é‡: 3 å€‹
â”‚   â”œâ”€â”€ ç¸½æ’æ”¾æºæ•¸é‡: 54 å€‹
â”‚   â”œâ”€â”€ å·²åŒ¯å…¥ä¸­å¤®åº«: 2 / 3 å¹´åº¦
â”‚   â””â”€â”€ [æ‰‹å‹•åŒæ­¥ L1 å°ˆæ¡ˆ] æŒ‰éˆ•
â””â”€â”€ å¹´åº¦ç›¤æŸ¥çµ±æ•´è¡¨
    â”œâ”€â”€ å¹´åº¦åˆ—è¡¨
    â”œâ”€â”€ ç¸½æ’æ”¾é‡
    â”œâ”€â”€ çµ„ç¹”ç›¤æŸ¥é‚Šç•Œ
    â”œâ”€â”€ æ’æ”¾æºçµ±è¨ˆï¼ˆScope 1/2/3ï¼‰
    â””â”€â”€ å°ˆæ¡ˆèˆ‡ä¸­å¤®åº«ç‹€æ…‹
```

**çµ„ç¹”ç›¤æŸ¥è³‡æ–™è¡¨æ ¼**ï¼š
| æ¬„ä½ | èªªæ˜ |
|-----|------|
| ç¯„ç–‡ | Scope 1/2/3ï¼ˆå½©è‰²æ¨™ç±¤ï¼‰ |
| å­é¡åˆ¥åç¨± | å›ºå®šç‡ƒç‡’/ç§»å‹•ç‡ƒç‡’/å¤–è³¼é›»åŠ›ç­‰ |
| æ’æ”¾æºåç¨± | å…·é«”æ’æ”¾æºï¼ˆå¦‚ã€Œå¤©ç„¶æ°£é‹çˆã€ï¼‰ |
| æ°£é«”ç¨®é¡ | COâ‚‚/CHâ‚„/Nâ‚‚O/HFCsç­‰ |
| æ’æ”¾ä¿‚æ•¸ | æ•¸å€¼+å–®ä½ |
| ä¿‚æ•¸ä¾†æº | ecoinvent/å…¶ä»– |

---

### ğŸ“¦ è³‡æ–™é›†ç®¡ç†

**å»ºç«‹è³‡æ–™é›†** (`DatasetNameModal.tsx`):
```typescript
interface Dataset {
  id: string
  name: string
  description?: string
  factorIds: number[]      // åŒ…å«çš„ä¿‚æ•¸ID
  created_at: string
  updated_at: string
}
```

**æ‰¹æ¬¡åŠ å…¥ä¿‚æ•¸** (`FactorSelectorModal.tsx`):
- Tab åˆ‡æ›ï¼šä¸­å¤®ä¿‚æ•¸åº« / å…¨åº«æœå°‹
- æœå°‹èˆ‡ç¯©é¸ï¼šé—œéµå­— + å¤šç¶­åº¦ç¯©é¸
- è¤‡é¸æ¡†é¸æ“‡ï¼šæ‰¹æ¬¡é¸æ“‡ä¿‚æ•¸
- è‡ªå‹•æ’é™¤å·²å­˜åœ¨çš„ä¿‚æ•¸

---

### ğŸ” å…¨åº«æœå°‹ç³»çµ±

**é€²éšå¤šç¶­ç¯©é¸**ï¼š
```
[ç¯©é¸] æŒ‰éˆ• â†’ å±•é–‹ç¯©é¸é¢æ¿
â”œâ”€â”€ åœ°å€ (Accordion)
â”œâ”€â”€ å¹´ä»½ (Accordion)
â”œâ”€â”€ å–®ä½ (Accordion)
â”œâ”€â”€ æ–¹æ³•å­¸ (Accordion)
â””â”€â”€ ä¾†æºé¡å‹ (Accordion)
    â”œâ”€â”€ æ¨™æº–è³‡æ–™åº«
    â”œâ”€â”€ PACTäº¤æ›
    â”œâ”€â”€ ä¾›æ‡‰å•†ä¿‚æ•¸
    â”œâ”€â”€ è‡ªå»ºä¿‚æ•¸
    â””â”€â”€ ç”¢å“ç¢³è¶³è·¡
```

**å‹•æ…‹ Facets ç”Ÿæˆ**ï¼š
- è‡ªå‹•å¾è³‡æ–™åº«æå–å¯ç”¨çš„ç¯©é¸é¸é …
- å³æ™‚æ›´æ–°ç¯©é¸çµæœ
- æ”¯æ´å¤šæ¢ä»¶ AND çµ„åˆ

---

## ç³»çµ±æŠ€è¡“æ¶æ§‹

### å‰ç«¯æŠ€è¡“æ£§

```
Framework & Language:
â”œâ”€â”€ Next.js 14 (App Router)
â”œâ”€â”€ TypeScript 5.5.4
â””â”€â”€ React 18.3.1

UI & Styling:
â”œâ”€â”€ Chakra UI 2.8.2
â”œâ”€â”€ Emotion (CSS-in-JS)
â””â”€â”€ Framer Motion 10.18.0

State Management:
â””â”€â”€ Zustand 4.5.2

Icons:
â”œâ”€â”€ Chakra UI Icons
â””â”€â”€ React Icons 5.5.0
```

### å°ˆæ¡ˆæ¶æ§‹

```
emission-factor-mvp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ layout.tsx         # æ ¹ä½ˆå±€
â”‚   â”‚   â”œâ”€â”€ page.tsx           # ä¸»é é¢ï¼ˆä¸‰æ¬„å¼ä»‹é¢ï¼‰
â”‚   â”‚   â””â”€â”€ providers.tsx      # Chakra UI Provider
â”‚   â”‚
â”‚   â”œâ”€â”€ components/            # UI çµ„ä»¶åº«
â”‚   â”‚   â”œâ”€â”€ SidebarTree.tsx   # å·¦å´æ¨¹ç‹€å°èˆª
â”‚   â”‚   â”œâ”€â”€ FactorTable.tsx   # ä¸­é–“ä¿‚æ•¸åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ FactorDetail.tsx  # å³å´è©³æƒ…é¢æ¿
â”‚   â”‚   â”œâ”€â”€ CompositeEditorDrawer.tsx    # çµ„åˆä¿‚æ•¸ç·¨è¼¯å™¨
â”‚   â”‚   â”œâ”€â”€ FactorSelectorModal.tsx      # ä¿‚æ•¸é¸æ“‡å™¨
â”‚   â”‚   â”œâ”€â”€ ProductCarbonFootprintCard.tsx  # ç”¢å“ç¢³è¶³è·¡å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ ProjectOverviewView.tsx      # L2 å°ˆæ¡ˆæ¦‚è¦½
â”‚   â”‚   â”œâ”€â”€ OrganizationalInventoryOverview.tsx  # L1 ç›¤æŸ¥æ¦‚è¦½
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                # é…ç½®é©…å‹•ç³»çµ±
â”‚   â”‚   â””â”€â”€ tableColumns.tsx  # è¡¨æ ¼æ¬„ä½é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                 # React Hooks
â”‚   â”‚   â”œâ”€â”€ useMockData.ts    # çµ±ä¸€è³‡æ–™ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useFactors.ts     # ä¿‚æ•¸è³‡æ–™é‚è¼¯
â”‚   â”‚   â””â”€â”€ useComposites.ts  # çµ„åˆä¿‚æ•¸é‚è¼¯
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                  # è³‡æ–™æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ mockDatabase.ts            # æ¨¡æ“¬è³‡æ–™åº«
â”‚   â”‚   â”œâ”€â”€ mockProjectData.ts         # å°ˆæ¡ˆ Mock è³‡æ–™
â”‚   â”‚   â”œâ”€â”€ mockCollections.ts         # é›†åˆ Mock è³‡æ–™
â”‚   â”‚   â””â”€â”€ factorProjectMapping.ts    # ä¿‚æ•¸å¼•ç”¨æ˜ å°„
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•¸
â”‚   â”‚   â””â”€â”€ tableRenderer.tsx # è¡¨æ ¼æ¸²æŸ“å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                 # TypeScript é¡å‹
â”‚   â”‚   â””â”€â”€ types.ts          # ç³»çµ±é¡å‹å®šç¾©
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                   # å·¥å…·ç¨‹å¼åº«
â”‚   â”‚   â”œâ”€â”€ apiClient.ts      # API å®¢æˆ¶ç«¯
â”‚   â”‚   â”œâ”€â”€ constants.ts      # ç³»çµ±å¸¸æ•¸
â”‚   â”‚   â””â”€â”€ store.ts          # Zustand Store
â”‚   â”‚
â”‚   â””â”€â”€ theme/                 # Chakra UI ä¸»é¡Œ
â”‚       â”œâ”€â”€ index.ts
â”‚       â”œâ”€â”€ colors.ts
â”‚       â””â”€â”€ components/
â”‚           â”œâ”€â”€ Button.ts
â”‚           â””â”€â”€ Table.ts
â”‚
â”œâ”€â”€ public/                    # éœæ…‹è³‡æº
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

### é…ç½®é©…å‹•æ¶æ§‹

#### è¡¨æ ¼é…ç½®ç³»çµ± (`src/config/tableColumns.tsx`)

**è¨­è¨ˆç†å¿µ**ï¼š
- **å–®ä¸€çœŸå¯¦ä¾†æº**ï¼šæ‰€æœ‰è¡¨æ ¼æ¬„ä½å®šç¾©é›†ä¸­åœ¨ä¸€è™•
- **é¡å‹å®‰å…¨**ï¼šå®Œæ•´çš„ TypeScript é¡å‹å®šç¾©
- **å¯æ“´å±•æ€§**ï¼šæ–°å¢è¡¨æ ¼æ¨¡å¼åªéœ€æ·»åŠ é…ç½®
- **ä¸€è‡´æ€§**ï¼šç¢ºä¿æ‰€æœ‰è¡¨æ ¼ä½¿ç”¨çµ±ä¸€çš„æ¸²æŸ“é‚è¼¯

**é…ç½®ä»‹é¢**ï¼š
```typescript
interface TableColumnConfig {
  key: string              // è³‡æ–™éµå€¼
  label: string            // æ¬„ä½æ¨™é¡Œ
  width: string            // æ¬„ä½å¯¬åº¦ (%)
  type: 'text' | 'number' | 'badge' | 'date' | 'custom'
  formatter?: (value: any, row: any) => React.ReactNode
  sortable?: boolean
  isNumeric?: boolean
}

interface FolderTableConfig {
  folderType: string
  displayName: string
  columns: TableColumnConfig[]
  searchPlaceholder: string
}
```

### çµ±ä¸€è³‡æ–™ç®¡ç† (`src/hooks/useMockData.ts`)

**æ¶æ§‹è¨­è¨ˆ**ï¼š
```typescript
export function useMockData() {
  return {
    // åŸºç¤è³‡æ–™
    getAllEmissionFactors: () => EmissionFactor[],
    getEmissionFactorById: (id) => EmissionFactor | undefined,

    // é›†åˆé¡å‹
    getFavoriteFactors: () => FactorTableItem[],
    getPactFactors: () => FactorTableItem[],
    getSupplierFactors: () => FactorTableItem[],
    getUserDefinedFactors: () => FactorTableItem[],

    // æœå°‹èˆ‡ç¯©é¸
    searchFactors: (keyword) => FactorTableItem[],
    getFactorsBySourceType: (type) => FactorTableItem[],

    // å°ˆæ¡ˆè³‡æ–™
    getProjectDataByNodeId: (nodeId) => FactorTableItem[],

    // ä¸­å¤®ä¿‚æ•¸åº«ï¼ˆå«å¼•ç”¨è¿½è¹¤ï¼‰
    getCentralLibraryFactors: () => ExtendedFactorTableItem[],

    // çµ±è¨ˆè³‡è¨Š
    getCollectionCounts: () => CollectionCounts,
    getSearchFacets: () => SearchFacets
  }
}
```

---

## è³‡æ–™æ¨¡å‹è¨­è¨ˆ

### æ ¸å¿ƒå¯¦é«”é¡å‹

#### EmissionFactorï¼ˆæ’æ”¾ä¿‚æ•¸ï¼‰

```typescript
interface EmissionFactor {
  // è­˜åˆ¥è³‡è¨Š
  id: number
  name: string
  version: string

  // åœ°ç†è³‡è¨Š
  continent: string
  country: string
  region?: string

  // æ™‚é–“è³‡è¨Š
  effective_date: string
  year?: number
  created_at: string
  updated_at: string

  // æ’æ”¾æ•¸æ“š
  co2_factor: number
  co2_unit: string
  ch4_factor?: number
  n2o_factor?: number
  value: number
  unit: string

  // æ–¹æ³•å­¸
  method_gwp?: string    // GWP100 / GWP20

  // ä¾†æºè³‡è¨Š
  source: string
  source_type: SourceType
  source_ref?: string

  // å“è³ªèˆ‡é©—è­‰
  data_quality: DataQuality
  validation_status?: ValidationStatus
  quality_score?: number

  // è©³ç´°è³‡è¨Š
  description?: string
  notes?: string

  // ä½¿ç”¨è¿½è¹¤
  usage_info?: FactorUsageInfo
}
```

#### CompositeFactorï¼ˆçµ„åˆä¿‚æ•¸ï¼‰

```typescript
interface CompositeFactor {
  id: number
  name: string
  formula_type: 'sum' | 'weighted'
  computed_value: number
  unit: string
  components: CompositeFactorComponent[]
  data_quality: DataQuality
  usage_info?: FactorUsageInfo
}
```

#### ProductFootprintFactorï¼ˆç”¢å“ç¢³è¶³è·¡ä¿‚æ•¸ï¼‰

```typescript
interface ProductFootprintFactor extends EmissionFactor {
  footprint_type: 'product_footprint'
  functional_unit: string
  product_name: string
  product_categories: string[]
  geographic_scope: string
  system_boundary: 'cradle_to_grave' | 'cradle_to_gate' | 'gate_to_gate'
  stage_breakdown: {
    raw_material: number
    manufacturing: number
    distribution: number
    use: number
    disposal: number
  }
  calculation_standard: string
  source_project_name: string
}
```

### è³‡æ–™é—œä¿‚åœ–

```
ä¿‚æ•¸å¼•ç”¨è¿½è¹¤ç³»çµ±ï¼š
factorProjectMapping.ts
  â†“
useMockData.ts (getCentralLibraryFactors)
  â†“
FactorTable.tsx
  â†“
é¡¯ç¤ºï¼šå¼•ç”¨å°ˆæ¡ˆè³‡è¨Š
```

---

## å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚
- Node.js 18.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- npm 9.0 æˆ–æ›´é«˜ç‰ˆæœ¬

### å®‰è£ä¾è³´
```bash
npm install
```

### ç’°å¢ƒè¨­å®š
```bash
cp .env.example .env.local
```

### é–‹ç™¼æ¨¡å¼
```bash
npm run dev
```
é–‹å•Ÿç€è¦½å™¨è¨ªå• [http://localhost:3000](http://localhost:3000)

### å»ºç½®å°ˆæ¡ˆ
```bash
npm run build
npm start
```

### é¡å‹æª¢æŸ¥
```bash
npm run type-check
```

### Lint æª¢æŸ¥
```bash
npm run lint
```

---

## é–‹ç™¼æŒ‡å—

### Mock è³‡æ–™
ç›®å‰ä½¿ç”¨ Mock è³‡æ–™é€²è¡Œé–‹ç™¼ï¼ŒåŒ…å«ï¼š
- æ¨¡æ“¬ API å›æ‡‰
- å‡è³‡æ–™ç”Ÿæˆ
- å»¶é²æ¨¡æ“¬

### é¡å‹å®‰å…¨
- å®Œæ•´çš„ TypeScript é¡å‹å®šç¾©
- åš´æ ¼çš„é¡å‹æª¢æŸ¥
- å‹åˆ¥æ¨è«–å’Œè‡ªå‹•å®Œæˆ

### æ•ˆèƒ½æœ€ä½³åŒ–
- React.memo å’Œ useMemo é˜²æ­¢ä¸å¿…è¦çš„é‡æ¸²æŸ“
- åˆ†é æ©Ÿåˆ¶æ¸›å°‘ DOM ç¯€é»æ•¸é‡
- ç¯©é¸è¨ˆç®—åœ¨ useMemo ä¸­å¿«å–çµæœ

### å¯è¨ªå•æ€§
- éµç›¤å°èˆªæ”¯æ´
- è¢å¹•é–±è®€å™¨å‹å¥½
- ARIA æ¨™ç±¤å’Œèªæ„ HTML

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º

### 1. æŸ¥çœ‹ç”¢å“ç¢³è¶³è·¡

```
æ­¥é©Ÿ 1: é¸æ“‡å°ˆæ¡ˆ
   å·¦å´æ¨¹ç‹€å°èˆª â†’ é»æ“Šã€ŒL2 - ç”¢å“ç¢³è¶³è·¡ã€
   â†“ é¡¯ç¤ºå°ˆæ¡ˆæ¦‚è¦½

æ­¥é©Ÿ 2: æª¢è¦–å°ˆæ¡ˆæ¦‚è¦½
   ä¸­é–“é¢æ¿é¡¯ç¤ºï¼š
   â”œâ”€â”€ å°ˆæ¡ˆè³‡è¨Šå¡ç‰‡
   â”œâ”€â”€ ç”¢å“çµ±æ•´è¡¨
   â””â”€â”€ [æ‰‹å‹•åŒæ­¥ L2 å°ˆæ¡ˆ] æŒ‰éˆ•

æ­¥é©Ÿ 3: æŸ¥çœ‹ç”¢å“è©³æƒ…
   é»æ“Šã€ŒA1 - æ™ºæ…§å‹æ‰‹æ©Ÿã€çš„ [æŸ¥çœ‹] æŒ‰éˆ•
   â†“ å°èˆªåˆ° product_1_1 ç¯€é»

æ­¥é©Ÿ 4: æª¢è¦–ç”¢å“ç”Ÿå‘½é€±æœŸæ¸…å–®
   â”œâ”€â”€ ç”¢å“ç¢³è¶³è·¡æ‘˜è¦å¡ç‰‡
   â””â”€â”€ ç”Ÿå‘½é€±æœŸæ¸…å–®è¡¨æ ¼
```

### 2. å»ºç«‹çµ„åˆä¿‚æ•¸

```
æ­¥é©Ÿ 1: å°èˆªåˆ°è‡ªå»ºä¿‚æ•¸
æ­¥é©Ÿ 2: é–‹å•Ÿçµ„åˆä¿‚æ•¸ç·¨è¼¯å™¨
æ­¥é©Ÿ 3: è¼¸å…¥åŸºæœ¬è³‡è¨Š
æ­¥é©Ÿ 4: é¸æ“‡çµ„æˆä¿‚æ•¸
æ­¥é©Ÿ 5: é è¦½èˆ‡å„²å­˜
```

### 3. å¾ç”¢å“ç¢³è¶³è·¡åŒ¯å…¥ä¸­å¤®åº«

```
æ­¥é©Ÿ 1: å°èˆªåˆ°ç”¢å“ç¯€é»
æ­¥é©Ÿ 2: é»æ“ŠåŒ¯å…¥æŒ‰éˆ•
æ­¥é©Ÿ 3: å¡«å¯«é©ç”¨ç¯„åœèˆ‡å“è³ªè³‡è¨Š
æ­¥é©Ÿ 4: ç¢ºèªåŒ¯å…¥
æ­¥é©Ÿ 5: é©—è­‰çµæœ
```

---

## ğŸš€ å¾ŒçºŒé–‹ç™¼è¨ˆåŠƒ

### Phase 1: å®Œæ•´å¾Œç«¯æ•´åˆ
- PostgreSQL + Prisma ORM
- RESTful API å¯¦ä½œ
- JWT èªè­‰æˆæ¬Š
- æª”æ¡ˆä¸Šå‚³åŠŸèƒ½
- Redis å¿«å–ç­–ç•¥

### Phase 2: é€²éšåŠŸèƒ½é–‹ç™¼
- æ‰¹æ¬¡æ“ä½œ
- Excel/CSV åŒ¯å…¥åŒ¯å‡º
- ä¿‚æ•¸æ¯”è¼ƒ
- ä½¿ç”¨çµ±è¨ˆåˆ†æ
- è¨ˆç®—å¼•æ“
- å ±è¡¨ç³»çµ±

### Phase 3: å”ä½œèˆ‡å·¥ä½œæµ
- å¤šä½¿ç”¨è€…å”ä½œ
- è©•è«–è¨»è§£
- è®Šæ›´æ­·å²
- é€šçŸ¥ç³»çµ±
- å¯©æ ¸å·¥ä½œæµ
- æ¬Šé™ç®¡ç†

### Phase 4: æ•´åˆèˆ‡ç”Ÿæ…‹
- ç¬¬ä¸‰æ–¹è³‡æ–™åº«æ•´åˆï¼ˆEPAã€IPCCï¼‰
- GraphQL API
- PWA / è¡Œå‹•ç«¯æ”¯æ´
- é›¢ç·šæ¨¡å¼
- AI è¼”åŠ©æ¨è–¦

### Phase 5: ä¼æ¥­ç´šåŠŸèƒ½
- å¤šç§Ÿæˆ¶æ¶æ§‹
- é«˜å¯ç”¨æ€§
- ISO 14064 / GHG Protocol èªè­‰
- ERP / PLM æ•´åˆ
- æ©Ÿå™¨å­¸ç¿’é æ¸¬

---

## ğŸ“Š æŠ€è¡“äº®é»

### âœ… æ ¸å¿ƒå„ªå‹¢

1. **å¯ç¶­è­·æ€§**
   - é…ç½®é©…å‹•è¡¨æ ¼ç³»çµ±
   - çµ±ä¸€è³‡æ–™ç®¡ç†å±¤
   - æ¸…æ™°çš„æ¨¡çµ„è·è²¬åˆ†é›¢

2. **å¯æ“´å±•æ€§**
   - æ–°å¢è¡¨æ ¼æ¨¡å¼åƒ…éœ€æ·»åŠ é…ç½®
   - TypeScript é¡å‹å®šç¾©å®Œæ•´
   - æ¨¡çµ„åŒ–è¨­è¨ˆæ˜“æ–¼æ“´å±•

3. **æ•ˆèƒ½æœ€ä½³åŒ–**
   - React.memo èˆ‡ useMemo
   - åˆ†é æ©Ÿåˆ¶
   - ç¯©é¸çµæœå¿«å–

4. **ä½¿ç”¨è€…é«”é©—**
   - ä¸‰æ¬„å¼ç›´è¦ºå°èˆª
   - å³æ™‚æœå°‹èˆ‡ç¯©é¸
   - å¹³æ»‘å‹•ç•«èˆ‡è¦–è¦ºå›é¥‹

---

## æˆæ¬Šæ¢æ¬¾

MIT License

---

## ğŸ‘¥ é–‹ç™¼åœ˜éšŠ

- **ç³»çµ±æ¶æ§‹**ï¼šåŸºæ–¼ä¼æ¥­ç´šç¢³ç®¡ç†éœ€æ±‚è¨­è¨ˆ
- **å‰ç«¯é–‹ç™¼**ï¼šæ¡ç”¨ç¾ä»£åŒ– React ç”Ÿæ…‹ç³»çµ±
- **UI/UXè¨­è¨ˆ**ï¼šåƒè€ƒæ›¸ç›®ç®¡ç†ç³»çµ±çš„ä½¿ç”¨è€…é«”é©—

---

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼š

1. **Bug å›å ±**ï¼šä½¿ç”¨ GitHub Issues å›å ±å•é¡Œ
2. **åŠŸèƒ½å»ºè­°**ï¼šæå‡ºæ–°åŠŸèƒ½éœ€æ±‚
3. **ç¨‹å¼ç¢¼è²¢ç»**ï¼šFork å°ˆæ¡ˆå¾Œæäº¤ Pull Request
4. **æ–‡ä»¶æ”¹å–„**ï¼šæ”¹å–„æ–‡ä»¶èªªæ˜å’Œç¯„ä¾‹

### é–‹ç™¼è¦ç¯„
- éµå¾ª ESLint å’Œ TypeScript è¦ç¯„
- æäº¤å‰åŸ·è¡Œ `npm run lint` å’Œ `npm run type-check`
- Commit è¨Šæ¯éµå¾ª Conventional Commits è¦ç¯„
- æ–°å¢åŠŸèƒ½éœ€åŒ…å«é¡å‹å®šç¾©

---

**æ–‡ä»¶ç‰ˆæœ¬**: v2.0
**æœ€å¾Œæ›´æ–°**: 2025-01-10
**ç³»çµ±ç‰ˆæœ¬**: v2024.1

**Emission Factor Management System** - è®“ç¢³ç®¡ç†æ›´ç°¡å–®ã€æ›´ç²¾ç¢º ğŸŒ±
