# æ’æ”¾ä¿‚æ•¸ç®¡ç†ç³»çµ± - ä¸»è¦ User Flow çµ±æ•´

## ğŸ“‹ ç›®éŒ„
1. [ç³»çµ±æ¶æ§‹æ¦‚è¦½](#ç³»çµ±æ¶æ§‹æ¦‚è¦½)
2. [ä¸»è¦åŠŸèƒ½æ¨¡çµ„](#ä¸»è¦åŠŸèƒ½æ¨¡çµ„)
3. [User Flow è©³ç´°èªªæ˜](#user-flow-è©³ç´°èªªæ˜)
4. [è³‡æ–™æµå‘](#è³‡æ–™æµå‘)

---

## ç³»çµ±æ¶æ§‹æ¦‚è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Emission Factor Management                    â”‚
â”‚                      æ’æ”¾ä¿‚æ•¸ç®¡ç†ç³»çµ±                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Left Sidebar  â”‚              â”‚   Main Content  â”‚
        â”‚   è³‡æ–™å¤¾æ¨¹ç‹€çµæ§‹  â”‚              â”‚    ä¸»è¦å…§å®¹å€åŸŸ   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚              â”‚                 â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚ ä¿‚æ•¸é›†åˆ  â”‚   â”‚ å°ˆæ¡ˆè³‡æ–™  â”‚   â”‚ ä¿‚æ•¸è¡¨æ ¼  â”‚   â”‚  è©³æƒ…é¢æ¿   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸»è¦åŠŸèƒ½æ¨¡çµ„

### 1ï¸âƒ£ ä¿‚æ•¸ç€è¦½èˆ‡ç®¡ç†
- ä¸­å¤®ä¿‚æ•¸åº«
- è‡ªå»ºä¿‚æ•¸
- PACT äº¤æ›
- ä¾›æ‡‰å•†ä¿‚æ•¸
- è³‡æ–™é›†ç®¡ç†

### 2ï¸âƒ£ å°ˆæ¡ˆç®¡ç†
- L2 - ç”¢å“ç¢³è¶³è·¡
- L1 - çµ„ç¹”ç¢³ç›¤æŸ¥

### 3ï¸âƒ£ ä¿‚æ•¸æ“ä½œ
- æŸ¥çœ‹è©³æƒ…
- å»ºç«‹è‡ªå»ºä¿‚æ•¸
- å…¨åŸŸæœå°‹
- åŒ¯å…¥/åŒ¯å‡º

---

## User Flow è©³ç´°èªªæ˜

### ğŸ”µ Flow 1: ç€è¦½ä¸­å¤®ä¿‚æ•¸åº«

```mermaid
graph TD
    A[é€²å…¥ç³»çµ±] --> B[é è¨­é¡¯ç¤ºä¸­å¤®ä¿‚æ•¸åº«]
    B --> C{é¸æ“‡æ“ä½œ}
    C -->|æœå°‹| D[è¼¸å…¥é—œéµå­—]
    C -->|ç¯©é¸| E[é¸æ“‡ç¯©é¸æ¢ä»¶]
    C -->|é»æ“Šä¿‚æ•¸| F[å³å´é¡¯ç¤ºè©³æƒ…é¢æ¿]
    D --> G[é¡¯ç¤ºæœå°‹çµæœ]
    E --> G
    F --> H{é€²éšæ“ä½œ}
    H -->|æŸ¥çœ‹ä½¿ç”¨æƒ…æ³| I[é¡¯ç¤ºå°ˆæ¡ˆå¼•ç”¨è³‡è¨Š]
    H -->|æŸ¥çœ‹å“è³ªè³‡è¨Š| J[é¡¯ç¤ºæ•¸æ“šå“è³ªè©•åˆ†]
    H -->|é—œé–‰| B
```

**æ­¥é©Ÿèªªæ˜ï¼š**
1. ç”¨æˆ¶é€²å…¥ç³»çµ±ï¼Œé è¨­é¡¯ç¤ºã€Œä¸­å¤®ä¿‚æ•¸åº«ã€
2. è¡¨æ ¼é¡¯ç¤ºæ‰€æœ‰è¢«å°ˆæ¡ˆä½¿ç”¨éçš„ä¿‚æ•¸å’Œç”¢å“ç¢³è¶³è·¡ä¿‚æ•¸
3. ç”¨æˆ¶å¯ä»¥ï¼š
   - ä½¿ç”¨æœå°‹æ¡†æœå°‹ä¿‚æ•¸åç¨±
   - ä½¿ç”¨ç¯©é¸å™¨æŒ‰ä¾†æºé¡å‹ã€åœ‹å®¶ã€å¹´ä»½ç¯©é¸
   - é»æ“Šåˆ†é æŒ‰éˆ•åˆ‡æ›é é¢
4. é»æ“Šä»»ä¸€ä¿‚æ•¸ï¼Œå³å´æ»‘å‡ºè©³æƒ…é¢æ¿
5. è©³æƒ…é¢æ¿é¡¯ç¤ºï¼š
   - åŸºæœ¬è³‡è¨Šï¼ˆåç¨±ã€å€¼ã€å–®ä½ï¼‰
   - æ•¸æ“šå“è³ªç­‰ç´š
   - å°ˆæ¡ˆå¼•ç”¨æƒ…æ³
   - ä¾†æºè³‡è¨Š

**æ¶‰åŠçµ„ä»¶ï¼š**
- `SidebarTree.tsx` - å·¦å´æ¨¹ç‹€çµæ§‹
- `FactorTable.tsx` - ä¿‚æ•¸è¡¨æ ¼
- `FactorDetail.tsx` - è©³æƒ…é¢æ¿

---

### ğŸŸ¢ Flow 2: å»ºç«‹è‡ªå»ºä¿‚æ•¸ï¼ˆçµ„åˆä¿‚æ•¸ï¼‰

```mermaid
graph TD
    A[é»æ“Šå·¦å´ã€Œè‡ªå»ºä¿‚æ•¸ã€] --> B[é¡¯ç¤ºè‡ªå»ºä¿‚æ•¸åˆ—è¡¨]
    B --> C[é»æ“Šã€Œ+ çµ„åˆä¿‚æ•¸ã€æŒ‰éˆ•]
    C --> D[é–‹å•Ÿçµ„åˆä¿‚æ•¸ç·¨è¼¯å™¨]
    D --> E{é¸æ“‡è¨ˆç®—æ–¹å¼}
    E -->|åŠ ç¸½| F[è¼¸å…¥ä¿‚æ•¸åç¨±å’Œå–®ä½]
    E -->|åŠ æ¬Šå¹³å‡| F
    F --> G[é»æ“Šã€Œ+ æ–°å¢ä¿‚æ•¸ã€]
    G --> H[é–‹å•Ÿä¿‚æ•¸é¸æ“‡å™¨ Modal]
    H --> I[æœå°‹ä¸¦é¸æ“‡ä¿‚æ•¸]
    I --> J{è¨ˆç®—æ–¹å¼?}
    J -->|åŠ ç¸½| K[ç›´æ¥åŠ å…¥åˆ—è¡¨]
    J -->|åŠ æ¬Šå¹³å‡| L[è¼¸å…¥æ¬Šé‡]
    K --> M[é¡¯ç¤ºå·²é¸ä¿‚æ•¸åˆ—è¡¨]
    L --> M
    M --> N{ç¹¼çºŒæ“ä½œ?}
    N -->|æ–°å¢æ›´å¤š| G
    N -->|åˆªé™¤ä¿‚æ•¸| O[å¾åˆ—è¡¨ç§»é™¤]
    N -->|å„²å­˜| P[è¨ˆç®—ä¸¦å„²å­˜çµ„åˆä¿‚æ•¸]
    O --> M
    P --> Q[å›åˆ°è‡ªå»ºä¿‚æ•¸åˆ—è¡¨]
    Q --> R[é¡¯ç¤ºæ–°å»ºçš„ä¿‚æ•¸]
```

**æ­¥é©Ÿèªªæ˜ï¼š**
1. é»æ“Šå·¦å´æ¨¹ç‹€çµæ§‹çš„ã€Œè‡ªå»ºä¿‚æ•¸ã€ç¯€é»
2. é»æ“Šã€Œ+ çµ„åˆä¿‚æ•¸ã€æŒ‰éˆ•ï¼Œé–‹å•Ÿç·¨è¼¯å™¨ Drawer
3. é¸æ“‡è¨ˆç®—æ–¹å¼ï¼ˆåŠ ç¸½/åŠ æ¬Šå¹³å‡ï¼‰
4. è¼¸å…¥ä¿‚æ•¸åç¨±å’Œå–®ä½
5. é»æ“Šã€Œ+ æ–°å¢ä¿‚æ•¸ã€é–‹å•Ÿé¸æ“‡å™¨
6. åœ¨é¸æ“‡å™¨ä¸­ï¼š
   - æœå°‹ä¿‚æ•¸
   - ç¯©é¸ä¿‚æ•¸é¡å‹
   - é»æ“Šä¿‚æ•¸å¡ç‰‡é¸æ“‡
7. å¦‚æœæ˜¯åŠ æ¬Šå¹³å‡ï¼Œè¼¸å…¥æ¬Šé‡
8. é‡è¤‡æ­¥é©Ÿ 5-7 æ–°å¢å¤šå€‹ä¿‚æ•¸
9. æª¢è¦–é è¦½çš„è¨ˆç®—å€¼
10. é»æ“Šã€Œå„²å­˜ã€å®Œæˆå»ºç«‹

**æ¶‰åŠçµ„ä»¶ï¼š**
- `CompositeEditorDrawer.tsx` - ç·¨è¼¯å™¨ä¸»é«”
- `FactorSelectorModal.tsx` - ä¿‚æ•¸é¸æ“‡å™¨

---

### ğŸŸ¡ Flow 3: å…¨åŸŸæœå°‹ä¿‚æ•¸

```mermaid
graph TD
    A[é»æ“Šé ‚éƒ¨æœå°‹æŒ‰éˆ•] --> B[é–‹å•Ÿå…¨åŸŸæœå°‹ Modal]
    B --> C[è¼¸å…¥æœå°‹é—œéµå­—]
    C --> D[å³æ™‚é¡¯ç¤ºæœå°‹çµæœ]
    D --> E{çµæœåˆ†é¡é¡¯ç¤º}
    E --> F[æ¨™æº–æ’æ”¾ä¿‚æ•¸]
    E --> G[è‡ªå»ºä¿‚æ•¸]
    E --> H[ç”¢å“ç¢³è¶³è·¡ä¿‚æ•¸]
    E --> I[å°ˆæ¡ˆè³‡æ–™]
    F --> J[é»æ“Šä¿‚æ•¸]
    G --> J
    H --> J
    I --> J
    J --> K[å°èˆªåˆ°å°æ‡‰ç¯€é»]
    K --> L[é¡¯ç¤ºä¿‚æ•¸è©³æƒ…]
```

**æ­¥é©Ÿèªªæ˜ï¼š**
1. é»æ“Šé ‚éƒ¨å°èˆªåˆ—çš„æœå°‹åœ–ç¤º
2. é–‹å•Ÿå…¨åŸŸæœå°‹ Modal
3. è¼¸å…¥æœå°‹é—œéµå­—ï¼ˆæ”¯æ´åç¨±ã€ä¾†æºã€å–®ä½ï¼‰
4. ç³»çµ±å³æ™‚æœå°‹æ‰€æœ‰ä¿‚æ•¸åº«ï¼š
   - æ¨™æº–æ’æ”¾ä¿‚æ•¸
   - è‡ªå»ºä¿‚æ•¸ï¼ˆçµ„åˆä¿‚æ•¸ï¼‰
   - ç”¢å“ç¢³è¶³è·¡ä¿‚æ•¸
   - å°ˆæ¡ˆè³‡æ–™ï¼ˆç”¢å“ã€å¹´åº¦ç›¤æŸ¥ï¼‰
5. çµæœåˆ†çµ„é¡¯ç¤ºï¼Œæ¯çµ„æœ€å¤šé¡¯ç¤º 5 ç­†
6. é»æ“Šä»»ä¸€çµæœï¼š
   - è‡ªå‹•å°èˆªåˆ°å°æ‡‰çš„æ¨¹ç‹€ç¯€é»
   - åœ¨è¡¨æ ¼ä¸­é«˜äº®é¡¯ç¤º
   - é–‹å•Ÿè©³æƒ…é¢æ¿

**æ¶‰åŠçµ„ä»¶ï¼š**
- `GlobalSearchModal.tsx` - å…¨åŸŸæœå°‹ä»‹é¢
- `page.tsx` - è™•ç†å°èˆªé‚è¼¯

---

### ğŸ”´ Flow 4: å»ºç«‹è³‡æ–™é›†

```mermaid
graph TD
    A[ä½¿ç”¨å…¨åŸŸæœå°‹æˆ–è¡¨æ ¼é¸æ“‡ä¿‚æ•¸] --> B[é¸æ“‡å¤šå€‹ä¿‚æ•¸]
    B --> C[é»æ“Šã€Œå»ºç«‹è³‡æ–™é›†ã€æŒ‰éˆ•]
    C --> D[é–‹å•Ÿè³‡æ–™é›†å‘½å Modal]
    D --> E[è¼¸å…¥è³‡æ–™é›†åç¨±]
    E --> F{é©—è­‰åç¨±}
    F -->|é‡è¤‡| G[é¡¯ç¤ºéŒ¯èª¤æç¤º]
    F -->|æœ‰æ•ˆ| H[ç¢ºèªå»ºç«‹]
    G --> E
    H --> I[è³‡æ–™é›†å‡ºç¾åœ¨å·¦å´æ¨¹ç‹€çµæ§‹]
    I --> J[é»æ“Šè³‡æ–™é›†ç¯€é»]
    J --> K[é¡¯ç¤ºè³‡æ–™é›†å…§çš„ä¿‚æ•¸]
    K --> L{ç®¡ç†æ“ä½œ}
    L -->|æ–°å¢ä¿‚æ•¸| M[é–‹å•Ÿå…¨åŸŸæœå°‹]
    L -->|ç§»é™¤ä¿‚æ•¸| N[åˆªé™¤ç¢ºèªå°è©±æ¡†]
    L -->|åˆªé™¤è³‡æ–™é›†| O[åˆªé™¤æ•´å€‹è³‡æ–™é›†]
```

**æ­¥é©Ÿèªªæ˜ï¼š**
1. æ–¹å¼ä¸€ï¼šåœ¨å…¨åŸŸæœå°‹ä¸­é¸æ“‡ä¿‚æ•¸
2. æ–¹å¼äºŒï¼šåœ¨ä»»ä½•ä¿‚æ•¸è¡¨æ ¼ä¸­å‹¾é¸ä¿‚æ•¸
3. é»æ“Šã€Œå»ºç«‹è³‡æ–™é›†ã€æˆ–ã€Œ+ åŠ å…¥è³‡æ–™é›†ã€
4. è¼¸å…¥è³‡æ–™é›†åç¨±ï¼ˆä¸å¯èˆ‡ç¾æœ‰åç¨±é‡è¤‡ï¼‰
5. ç¢ºèªå¾Œï¼Œè³‡æ–™é›†å‡ºç¾åœ¨å·¦å´æ¨¹ç‹€çµæ§‹
6. é»æ“Šè³‡æ–™é›†ç¯€é»æŸ¥çœ‹å…§å®¹
7. å¯ä»¥ç¹¼çºŒæ–°å¢æˆ–ç§»é™¤ä¿‚æ•¸
8. å¯ä»¥åˆªé™¤æ•´å€‹è³‡æ–™é›†

**æ¶‰åŠçµ„ä»¶ï¼š**
- `DatasetNameModal.tsx` - å‘½åä»‹é¢
- `DeleteConfirmDialog.tsx` - åˆªé™¤ç¢ºèª

---

### ğŸŸ£ Flow 5: L2 ç”¢å“ç¢³è¶³è·¡å°ˆæ¡ˆç®¡ç†

```mermaid
graph TD
    A[é»æ“Šã€ŒL2 - ç”¢å“ç¢³è¶³è·¡ã€ç¯€é»] --> B[é¡¯ç¤ºå°ˆæ¡ˆæ¦‚è¦½é é¢]
    B --> C{å°ˆæ¡ˆæ¦‚è¦½è³‡è¨Š}
    C --> D[å°ˆæ¡ˆç‹€æ…‹å’Œç‰ˆæœ¬]
    C --> E[æœ€å¾ŒåŒ¯å…¥æ™‚é–“]
    C --> F[ç”¢å“çµ±æ•´è¡¨]
    F --> G{ç”¢å“åˆ†é¡}
    G --> H[å…§éƒ¨ç”¢å“ 3å€‹]
    G --> I[PACT ç”¢å“ 8å€‹]
    H --> J[é¡¯ç¤ºç”¢å“è³‡è¨Š]
    I --> J
    J --> K[ç¢³è¶³è·¡å€¼]
    J --> L[å°ˆæ¡ˆç‹€æ…‹]
    J --> M[ä¸­å¤®åº«åŒ¯å…¥ç‹€æ…‹]
    M --> N{æ“ä½œé¸é …}
    N -->|æŸ¥çœ‹| O[å°èˆªåˆ°ç”¢å“è©³æƒ…]
    N -->|åŒ¯å…¥| P[é–‹å•ŸåŒ¯å…¥è¨­å®š Modal]
    N -->|åŒæ­¥| Q[æ‰‹å‹•åŒæ­¥å°ˆæ¡ˆ]
    O --> R[é¡¯ç¤ºç”¢å“éšæ®µè³‡æ–™]
    P --> S[å¡«å¯«åŒ¯å…¥åƒæ•¸]
    S --> T[åŒ¯å…¥åˆ°ä¸­å¤®ä¿‚æ•¸åº«]
```

**æ­¥é©Ÿèªªæ˜ï¼š**
1. é»æ“Šå·¦å´ã€ŒL2 - ç”¢å“ç¢³è¶³è·¡ã€æ ¹ç¯€é»
2. é¡¯ç¤ºå°ˆæ¡ˆæ¦‚è¦½é é¢ï¼ŒåŒ…å«ï¼š
   - å°ˆæ¡ˆåŸºæœ¬è³‡è¨Šå¡ç‰‡
   - ç”¢å“çµ±æ•´è¡¨
3. ç”¢å“çµ±æ•´è¡¨é¡¯ç¤ºï¼š
   - å…§éƒ¨ç”¢å“ï¼ˆA1-æ™ºæ…§å‹æ‰‹æ©Ÿã€A2-LEDç‡ˆå…·ã€A3-ç­†è¨˜å‹é›»è…¦ï¼‰
   - PACT äº¤æ›ç”¢å“ï¼ˆ8å€‹ï¼‰
4. æ¯å€‹ç”¢å“é¡¯ç¤ºï¼š
   - ç”¢å“åç¨±
   - ç¢³è¶³è·¡å€¼ï¼ˆkg COâ‚‚e/å–®ä½ï¼‰
   - å°ˆæ¡ˆç‹€æ…‹ï¼ˆå·²é–å®š/æœªé–å®š/å·²é©—è­‰ï¼‰
   - ä¸­å¤®åº«ç‹€æ…‹ï¼ˆå·²åŒ¯å…¥/æœªåŒ¯å…¥ï¼‰
5. æ“ä½œåŠŸèƒ½ï¼š
   - **æŸ¥çœ‹**ï¼šå°èˆªåˆ°ç”¢å“ç¯€é»ï¼ŒæŸ¥çœ‹éšæ®µæ˜ç´°
   - **åŒ¯å…¥**ï¼šå°‡ç”¢å“ç¢³è¶³è·¡åŒ¯å…¥ä¸­å¤®ä¿‚æ•¸åº«
   - **åŒæ­¥**ï¼šæ‰‹å‹•åŒæ­¥å°ˆæ¡ˆæœ€æ–°è³‡æ–™
6. é»æ“Šã€ŒæŸ¥çœ‹ã€å¾Œï¼š
   - è‡ªå‹•å±•é–‹ç”¢å“ç¯€é»
   - é¡¯ç¤ºç”Ÿå‘½é€±æœŸéšæ®µè³‡æ–™ï¼ˆåŸç‰©æ–™ã€è£½é€ ã€é…é€ã€ä½¿ç”¨ã€å»¢æ£„ï¼‰

**æ¶‰åŠçµ„ä»¶ï¼š**
- `ProjectOverviewView.tsx` - L2 å°ˆæ¡ˆæ¦‚è¦½
- `ProductCarbonFootprintCard.tsx` - ç”¢å“å¡ç‰‡
- `ImportToCentralModal.tsx` - åŒ¯å…¥è¨­å®š

---

### ğŸŸ  Flow 6: L1 çµ„ç¹”ç¢³ç›¤æŸ¥å°ˆæ¡ˆç®¡ç†

```mermaid
graph TD
    A[é»æ“Šã€ŒL1 - çµ„ç¹”ç¢³ç›¤æŸ¥ã€ç¯€é»] --> B[é¡¯ç¤ºç›¤æŸ¥æ¦‚è¦½é é¢]
    B --> C{ç›¤æŸ¥æ¦‚è¦½è³‡è¨Š}
    C --> D[å°ˆæ¡ˆç‹€æ…‹å’Œç‰ˆæœ¬]
    C --> E[æ’æ”¾æºçµ±è¨ˆ]
    C --> F[å¹´åº¦ç›¤æŸ¥çµ±æ•´è¡¨]
    F --> G{å¹´åº¦åˆ—è¡¨}
    G --> H[2024å¹´åº¦ç›¤æŸ¥]
    G --> I[2023å¹´åº¦ç›¤æŸ¥]
    G --> J[2022å¹´åº¦ç›¤æŸ¥]
    H --> K[é¡¯ç¤ºå¹´åº¦è³‡è¨Š]
    I --> K
    J --> K
    K --> L[ç¸½æ’æ”¾é‡]
    K --> M[çµ„ç¹”ç›¤æŸ¥é‚Šç•Œ]
    K --> N[Scope 1/2/3 çµ±è¨ˆ]
    K --> O[å°ˆæ¡ˆç‹€æ…‹]
    K --> P[ä¸­å¤®åº«ç‹€æ…‹]
    P --> Q{æ“ä½œé¸é …}
    Q -->|æŸ¥çœ‹| R[å°èˆªåˆ°å¹´åº¦è©³æƒ…]
    Q -->|åŒæ­¥| S[æ‰‹å‹•åŒæ­¥å°ˆæ¡ˆ]
    R --> T[é¡¯ç¤º Scope æ’æ”¾æº]
    T --> U[Scope 1 - ç›´æ¥æ’æ”¾]
    T --> V[Scope 2 - é–“æ¥æ’æ”¾]
    T --> W[Scope 3 - å…¶ä»–é–“æ¥]
```

**æ­¥é©Ÿèªªæ˜ï¼š**
1. é»æ“Šå·¦å´ã€ŒL1 - çµ„ç¹”ç¢³ç›¤æŸ¥ã€æ ¹ç¯€é»
2. é¡¯ç¤ºç›¤æŸ¥æ¦‚è¦½é é¢ï¼ŒåŒ…å«ï¼š
   - å°ˆæ¡ˆåŸºæœ¬è³‡è¨Šå¡ç‰‡ï¼ˆç¶ è‰²ä¸»é¡Œï¼‰
   - å¹´åº¦ç›¤æŸ¥çµ±æ•´è¡¨
3. å¹´åº¦ç›¤æŸ¥çµ±æ•´è¡¨é¡¯ç¤ºï¼š
   - ä¸‰å€‹å¹´åº¦ï¼ˆ2024ã€2023ã€2022ï¼‰
4. æ¯å€‹å¹´åº¦é¡¯ç¤ºï¼š
   - å¹´åº¦å’Œåç¨±
   - ç¸½æ’æ”¾é‡ï¼ˆkg COâ‚‚eï¼‰
   - çµ„ç¹”ç›¤æŸ¥é‚Šç•Œï¼ˆåˆ†å…¬å¸åç¨±ï¼‰
   - Scope 1/2/3 æ’æ”¾æºæ•¸é‡
   - å°ˆæ¡ˆç‹€æ…‹ï¼ˆå·²é–å®š/æœªé–å®š/å·²é©—è­‰ï¼‰
   - ä¸­å¤®åº«ç‹€æ…‹ï¼ˆå·²åŒ¯å…¥/æœªåŒ¯å…¥ï¼‰
5. æ“ä½œåŠŸèƒ½ï¼š
   - **æŸ¥çœ‹**ï¼šå°èˆªåˆ°å¹´åº¦ç¯€é»ï¼ŒæŸ¥çœ‹æ’æ”¾æºæ˜ç´°
   - **åŒæ­¥**ï¼šæ‰‹å‹•åŒæ­¥å°ˆæ¡ˆæœ€æ–°è³‡æ–™
6. é»æ“Šã€ŒæŸ¥çœ‹ã€å¾Œï¼š
   - è‡ªå‹•å±•é–‹å¹´åº¦ç¯€é»
   - é¡¯ç¤º Scope æ’æ”¾æºåˆ†é¡è³‡æ–™

**æ¶‰åŠçµ„ä»¶ï¼š**
- `OrganizationalInventoryOverview.tsx` - L1 ç›¤æŸ¥æ¦‚è¦½

---

### ğŸ”µ Flow 7: æŸ¥çœ‹å°ˆæ¡ˆè³‡æ–™è©³æƒ…

```mermaid
graph TD
    A[åœ¨å°ˆæ¡ˆæ¨¹ç‹€çµæ§‹ä¸­å°èˆª] --> B{é¸æ“‡ç¯€é»é¡å‹}
    B -->|ç”¢å“ç¯€é»| C[é¡¯ç¤ºç”¢å“éšæ®µè¡¨æ ¼]
    B -->|å¹´åº¦ç¯€é»| D[é¡¯ç¤º Scope è¡¨æ ¼]
    B -->|æ’æ”¾æºç¯€é»| E[é¡¯ç¤ºæ˜ç´°è³‡æ–™]
    C --> F[éšæ®µåˆ—è¡¨]
    F --> G[åŸç‰©æ–™éšæ®µ]
    F --> H[è£½é€ éšæ®µ]
    F --> I[é…é€/ä½¿ç”¨/å»¢æ£„éšæ®µ]
    D --> J[Scope åˆ—è¡¨]
    J --> K[Scope 1 - ç›´æ¥æ’æ”¾]
    J --> L[Scope 2 - èƒ½æºé–“æ¥æ’æ”¾]
    J --> M[Scope 3 - å…¶ä»–é–“æ¥æ’æ”¾]
    E --> N[æŸ¥çœ‹æ’æ”¾æºæ˜ç´°]
    N --> O[æ’æ”¾æºåç¨±å’Œé¡åˆ¥]
    N --> P[æ´»å‹•æ•¸æ“š]
    N --> Q[ä½¿ç”¨çš„æ’æ”¾ä¿‚æ•¸]
    Q --> R[é»æ“Šä¿‚æ•¸åç¨±]
    R --> S[é–‹å•Ÿä¿‚æ•¸è©³æƒ…]
```

**æ­¥é©Ÿèªªæ˜ï¼š**

**L2 ç”¢å“ç¢³è¶³è·¡ï¼š**
1. å±•é–‹ã€ŒL2 - ç”¢å“ç¢³è¶³è·¡ã€â†’ é¸æ“‡ç”¢å“ï¼ˆå¦‚ï¼šA1-æ™ºæ…§å‹æ‰‹æ©Ÿï¼‰
2. é¡¯ç¤ºç”¢å“ç”Ÿå‘½é€±æœŸéšæ®µè¡¨æ ¼
3. æ¯è¡Œé¡¯ç¤ºï¼š
   - éšæ®µåç¨±ï¼ˆåŸç‰©æ–™/è£½é€ /é…é€/ä½¿ç”¨/å»¢æ£„ï¼‰
   - é …ç›®åç¨±ï¼ˆå¦‚ï¼šé‹åˆé‡‘å¤–æ®¼ï¼‰
   - æ•¸é‡è¦æ ¼
   - ä½¿ç”¨çš„æ’æ”¾ä¿‚æ•¸
   - èª¤å·®ç­‰ç´š
4. é»æ“Šæ’æ”¾æºç¯€é»ï¼ˆå¦‚ï¼šåŸç‰©æ–™æ¡è³¼ï¼‰
5. åªé¡¯ç¤ºè©²éšæ®µçš„æ˜ç´°è³‡æ–™

**L1 çµ„ç¹”ç¢³ç›¤æŸ¥ï¼š**
1. å±•é–‹ã€ŒL1 - çµ„ç¹”ç¢³ç›¤æŸ¥ã€â†’ é¸æ“‡å¹´åº¦ï¼ˆå¦‚ï¼š2024å¹´åº¦ç›¤æŸ¥ï¼‰
2. é¡¯ç¤º Scope åˆ†é¡è¡¨æ ¼
3. æ¯è¡Œé¡¯ç¤ºï¼š
   - Scope ç¯„ç–‡ï¼ˆScope 1/2/3ï¼‰
   - æ’æ”¾æºé¡åˆ¥å’Œåç¨±
   - æ´»å‹•æ•¸æ“šå’Œå–®ä½
   - ä½¿ç”¨çš„æ’æ”¾ä¿‚æ•¸
   - ç‰ˆæœ¬è³‡è¨Š
4. é»æ“Š Scope ç¯€é»ï¼ˆå¦‚ï¼šScope 1 ç›´æ¥æ’æ”¾ï¼‰
5. åªé¡¯ç¤ºè©² Scope çš„æ’æ”¾æº

**å…±åŒç‰¹è‰²ï¼š**
- å¯é»æ“Šã€Œä½¿ç”¨çš„æ’æ”¾ä¿‚æ•¸ã€æ¬„ä½
- é–‹å•Ÿè©²ä¿‚æ•¸çš„è©³æƒ…é¢æ¿
- æŸ¥çœ‹ä¿‚æ•¸ä¾†æºå’Œå“è³ªè³‡è¨Š

**æ¶‰åŠçµ„ä»¶ï¼š**
- `FactorTable.tsx` - è™•ç†ä¸åŒç¯€é»é¡å‹çš„è¡¨æ ¼æ¸²æŸ“
- `config/tableColumns.tsx` - è¡¨æ ¼æ¬„ä½é…ç½®

---

### ğŸŸ¢ Flow 8: ç”¢å“ç¢³è¶³è·¡åŒ¯å…¥ä¸­å¤®åº«

```mermaid
graph TD
    A[åœ¨ L2 å°ˆæ¡ˆæ¦‚è¦½ä¸­] --> B[é¸æ“‡æœªåŒ¯å…¥çš„ç”¢å“]
    B --> C[é»æ“Šã€ŒåŒ¯å…¥ã€æŒ‰éˆ•]
    C --> D[é–‹å•ŸåŒ¯å…¥è¨­å®š Modal]
    D --> E{å¡«å¯«åŒ¯å…¥åƒæ•¸}
    E --> F[ä¿‚æ•¸åç¨±]
    E --> G[åŠŸèƒ½å–®ä½]
    E --> H[ç”¢å“é¡åˆ¥æ¨™ç±¤]
    E --> I[åœ°ç†ç¯„åœ]
    E --> J[ç³»çµ±é‚Šç•Œ]
    E --> K[æ•¸æ“šå“è³ª]
    E --> L[æœ‰æ•ˆå¹´ä»½]
    F --> M[æª¢è¦–é è¦½]
    G --> M
    H --> M
    I --> M
    J --> M
    K --> M
    L --> M
    M --> N[ç¢ºèªåŒ¯å…¥]
    N --> O[ç”¢å“ç¢³è¶³è·¡ä¿‚æ•¸è¢«å»ºç«‹]
    O --> P[å‡ºç¾åœ¨ä¸­å¤®ä¿‚æ•¸åº«]
    P --> Q[ç‹€æ…‹æ›´æ–°ç‚ºã€Œå·²åŒ¯å…¥ã€]
```

**æ­¥é©Ÿèªªæ˜ï¼š**
1. åœ¨ L2 å°ˆæ¡ˆæ¦‚è¦½çš„ç”¢å“çµ±æ•´è¡¨ä¸­
2. æ‰¾åˆ°ç‹€æ…‹ç‚ºã€Œâšª æœªåŒ¯å…¥ã€çš„ç”¢å“
3. é»æ“Šè©²ç”¢å“çš„æ“ä½œé¸å–® â†’ ã€ŒåŒ¯å…¥åˆ°ä¸­å¤®åº«ã€
4. é–‹å•ŸåŒ¯å…¥è¨­å®š Modal
5. å¡«å¯«å¿…è¦åƒæ•¸ï¼š
   - **ä¿‚æ•¸åç¨±**ï¼šåœ¨ä¸­å¤®åº«ä¸­é¡¯ç¤ºçš„åç¨±
   - **åŠŸèƒ½å–®ä½**ï¼šæè¿°ï¼ˆå¦‚ï¼š1 æ”¯æ‰‹æ©Ÿï¼Œä½¿ç”¨ 3 å¹´ï¼‰
   - **ç”¢å“é¡åˆ¥**ï¼šå¤šé¸æ¨™ç±¤ï¼ˆå¦‚ï¼šé›»å­ç”¢å“ã€æ¶ˆè²»å“ï¼‰
   - **åœ°ç†ç¯„åœ**ï¼šå°ç£/äºæ´²/å…¨çƒ
   - **ç³»çµ±é‚Šç•Œ**ï¼šæ–ç±ƒåˆ°å¢³å¢“/æ–ç±ƒåˆ°å¤§é–€/å¤§é–€åˆ°å¤§é–€
   - **æ•¸æ“šå“è³ª**ï¼šPrimary/Secondary/Tertiary
   - **æœ‰æ•ˆå¹´ä»½**ï¼šå¾å“ªä¸€å¹´é–‹å§‹æœ‰æ•ˆ
   - **æ•¸æ“šä¾†æºæ¯”ä¾‹**ï¼šå¯¦æ¸¬æ•¸æ“š vs æ¬¡ç´šè³‡æ–™
6. ç³»çµ±è‡ªå‹•è¨ˆç®—ï¼š
   - éšæ®µåˆ†è§£æ•¸æ“šï¼ˆåŸç‰©æ–™/è£½é€ /é…é€/ä½¿ç”¨/å»¢æ£„ï¼‰
   - ç¸½ç¢³è¶³è·¡å€¼
7. é è¦½ä¸¦ç¢ºèª
8. åŒ¯å…¥å®Œæˆå¾Œï¼š
   - ç”¢å“ç‹€æ…‹è®Šç‚ºã€Œâœ… å·²åŒ¯å…¥ã€
   - ä¿‚æ•¸å‡ºç¾åœ¨ã€Œä¸­å¤®ä¿‚æ•¸åº«ã€
   - source_type æ¨™è¨˜ç‚º 'project_data'

**æ¶‰åŠçµ„ä»¶ï¼š**
- `ImportToCentralModal.tsx` - åŒ¯å…¥è¨­å®šä»‹é¢
- `mockProjectData.ts` - handleImportProductToCentral()

---

## è³‡æ–™æµå‘

### ä¿‚æ•¸è³‡æ–™ä¾†æºå±¤ç´š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ’æ”¾ä¿‚æ•¸è³‡æ–™ä¾†æº                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨™æº–æ’æ”¾ä¿‚æ•¸   â”‚  â”‚  å°ˆæ¡ˆç”¢ç”Ÿä¿‚æ•¸   â”‚  â”‚  ä½¿ç”¨è€…å»ºç«‹  â”‚
â”‚  (mockDatabase)â”‚  â”‚  (mockProject)  â”‚  â”‚  (composite)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   ä¸­å¤®ä¿‚æ•¸åº«      â”‚
                   â”‚  (æ”¶é›†æ‰€æœ‰è¢«ä½¿ç”¨  â”‚
                   â”‚   çš„ä¿‚æ•¸)        â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å°ˆæ¡ˆè³‡æ–™å¼•ç”¨é—œä¿‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å°ˆæ¡ˆä½¿ç”¨æ’æ”¾ä¿‚æ•¸                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                               â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  L2 ç”¢å“ç¢³è¶³è·¡  â”‚            â”‚  L1 çµ„ç¹”ç¢³ç›¤æŸ¥   â”‚
  â”‚                â”‚            â”‚                 â”‚
  â”‚ â€¢ 3å€‹å…§éƒ¨ç”¢å“   â”‚            â”‚ â€¢ 3å€‹å¹´åº¦ç›¤æŸ¥    â”‚
  â”‚ â€¢ 8å€‹PACTç”¢å“  â”‚            â”‚ â€¢ 54å€‹æ’æ”¾æº     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                               â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  factorProjectMapping â”‚
              â”‚  (è¿½è¹¤ä¿‚æ•¸ä½¿ç”¨æƒ…æ³)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   usage_info         â”‚
              â”‚  (é¡¯ç¤ºåœ¨ä¿‚æ•¸è©³æƒ…ä¸­)   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## çµ„ä»¶ä¾è³´é—œä¿‚

```
page.tsx (ä¸»é é¢)
  â”‚
  â”œâ”€ SidebarTree.tsx (å·¦å´æ¨¹ç‹€é¸å–®)
  â”‚   â””â”€ TreeNode (éè¿´çµ„ä»¶)
  â”‚
  â”œâ”€ FactorTable.tsx (ä¸»è¦è¡¨æ ¼å€åŸŸ)
  â”‚   â”œâ”€ ProjectOverviewView.tsx (L2 å°ˆæ¡ˆæ¦‚è¦½)
  â”‚   â”œâ”€ OrganizationalInventoryOverview.tsx (L1 ç›¤æŸ¥æ¦‚è¦½)
  â”‚   â”œâ”€ ProductCarbonFootprintCard.tsx (ç”¢å“å¡ç‰‡)
  â”‚   â””â”€ tableRenderer.tsx (è¡¨æ ¼æ¸²æŸ“å·¥å…·)
  â”‚
  â”œâ”€ FactorDetail.tsx (å³å´è©³æƒ…é¢æ¿)
  â”‚
  â”œâ”€ GlobalSearchModal.tsx (å…¨åŸŸæœå°‹)
  â”‚   â””â”€ EmissionFactorCards.tsx (æœå°‹çµæœå¡ç‰‡)
  â”‚
  â”œâ”€ CompositeEditorDrawer.tsx (çµ„åˆä¿‚æ•¸ç·¨è¼¯å™¨)
  â”‚   â””â”€ FactorSelectorModal.tsx (ä¿‚æ•¸é¸æ“‡å™¨)
  â”‚
  â”œâ”€ ImportToCentralModal.tsx (åŒ¯å…¥è¨­å®š)
  â”‚
  â”œâ”€ DatasetNameModal.tsx (è³‡æ–™é›†å‘½å)
  â”‚
  â””â”€ DeleteConfirmDialog.tsx (åˆªé™¤ç¢ºèª)
```

---

## è³‡æ–™ç®¡ç† Hooks

```typescript
// çµ±ä¸€çš„è³‡æ–™å­˜å– Hook
useMockData()
  â”œâ”€ getAllEmissionFactors() // å–å¾—æ‰€æœ‰æ’æ”¾ä¿‚æ•¸
  â”œâ”€ getAllCompositeFactors() // å–å¾—æ‰€æœ‰çµ„åˆä¿‚æ•¸
  â”œâ”€ getCentralLibraryFactors() // å–å¾—ä¸­å¤®ä¿‚æ•¸åº«
  â”œâ”€ getProjectAData() // å–å¾— L2 å°ˆæ¡ˆè³‡æ–™
  â”œâ”€ getProjectBData() // å–å¾— L1 å°ˆæ¡ˆè³‡æ–™
  â”œâ”€ getFactorUsageMap() // å–å¾—ä¿‚æ•¸ä½¿ç”¨æƒ…æ³
  â””â”€ searchFactors() // æœå°‹ä¿‚æ•¸

// å°ˆæ¡ˆè³‡æ–™å°æ‡‰
factorProjectMapping.ts
  â”œâ”€ calculateFactorUsage() // è¨ˆç®—ä¿‚æ•¸ä½¿ç”¨æƒ…æ³
  â”œâ”€ getFactorIdBySelection() // æ ¹æ“šé¸æ“‡æ–‡å­—å–å¾—ä¿‚æ•¸ID
  â””â”€ formatProjectUsage() // æ ¼å¼åŒ–ä½¿ç”¨æƒ…æ³æ–‡å­—
```

---

## ç‹€æ…‹ç®¡ç†

### ä¸»è¦ç‹€æ…‹è®Šæ•¸

```typescript
// page.tsx ä¸­çš„ç‹€æ…‹
const [selectedNode, setSelectedNode] // ç•¶å‰é¸ä¸­çš„æ¨¹ç‹€ç¯€é»
const [selectedFactor, setSelectedFactor] // ç•¶å‰é¸ä¸­çš„ä¿‚æ•¸
const [isDetailPanelOpen, setIsDetailPanelOpen] // è©³æƒ…é¢æ¿é–‹é—œ
const [userDefinedFactors, setUserDefinedFactors] // è‡ªå»ºä¿‚æ•¸åˆ—è¡¨
const [datasets, setDatasets] // è³‡æ–™é›†åˆ—è¡¨
const [currentDataset, setCurrentDataset] // ç•¶å‰è³‡æ–™é›†
const [centralLibraryUpdateKey, setCentralLibraryUpdateKey] // ä¸­å¤®åº«æ›´æ–°éµ
```

### ç‹€æ…‹æµè½‰

```
ä½¿ç”¨è€…æ“ä½œ â†’ æ›´æ–°ç‹€æ…‹ â†’ è§¸ç™¼ re-render â†’ æ›´æ–° UI
     â†“           â†“            â†“             â†“
é»æ“Šç¯€é» â†’ selectedNode â†’ FactorTable â†’ é¡¯ç¤ºå°æ‡‰è¡¨æ ¼
é»æ“Šä¿‚æ•¸ â†’ selectedFactor â†’ FactorDetail â†’ é¡¯ç¤ºè©³æƒ…
å»ºç«‹è³‡æ–™é›† â†’ datasets â†’ SidebarTree â†’ é¡¯ç¤ºæ–°ç¯€é»
```

---

## è¡¨æ ¼é…ç½®ç³»çµ±

### é…ç½®é©…å‹•æ¶æ§‹

```typescript
// tableColumns.tsx - å®šç¾©å„é¡å‹è¡¨æ ¼çš„æ¬„ä½é…ç½®
export function getTableConfig(viewType: string) {
  switch (viewType) {
    case 'organizational_inventory':
      return organizationalInventoryColumns
    case 'product_carbon_footprint':
      return productCarbonFootprintColumns
    case 'user_defined':
      return userDefinedColumns
    case 'favorites':
      return centralLibraryColumns
    // ...
  }
}

// tableRenderer.tsx - çµ±ä¸€çš„æ¸²æŸ“å‡½æ•¸
export function renderTableHeader(config)
export function renderTableRow(item, config)
export function renderEmptyState(viewType)
```

### æ¬„ä½é…ç½®ç¯„ä¾‹

```typescript
{
  key: 'name',
  label: 'ä¿‚æ•¸åç¨±',
  width: '25%',
  render: (item) => <Text>{item.name}</Text>
}
```

---

## è·¯ç”±é‚è¼¯

### ç¯€é»é¡å‹åˆ¤æ–·

```typescript
function getTableNodeType(node: TreeNodeProps) {
  // L2 å°ˆæ¡ˆæ ¹ç¯€é» â†’ project_overview
  if (node.id === 'project_1' && node.type === 'project')
    return 'project_overview'

  // L1 å°ˆæ¡ˆæ ¹ç¯€é» â†’ inventory_overview
  if (node.id === 'project_2' && node.type === 'project')
    return 'inventory_overview'

  // ç”¢å“ç¯€é»æˆ–å…¶å­ç¯€é» â†’ product_carbon_footprint
  if (node.id.startsWith('product_') || node.id.startsWith('source_1_'))
    return 'product_carbon_footprint'

  // å¹´åº¦ç¯€é»æˆ–å…¶å­ç¯€é» â†’ organizational_inventory
  if (node.id.startsWith('year_') || node.id.startsWith('source_2_'))
    return 'organizational_inventory'

  // ä¸­å¤®ä¿‚æ•¸åº« â†’ favorites
  if (node.id === 'favorites')
    return 'favorites'

  // ... å…¶ä»–é¡å‹
}
```

---

## è³‡æ–™å“è³ªè¿½è¹¤

### å“è³ªç­‰ç´š

```typescript
type DataQuality = 'Primary' | 'Secondary' | 'Tertiary'

Primary: è‡ªå» ç™¼å±•ä¿‚æ•¸ã€è³ªé‡å¹³è¡¡æ‰€å¾—ä¿‚æ•¸ã€è£½é€ å» æä¾›ä¿‚æ•¸
Secondary: åœ‹éš›æ’æ”¾ä¿‚æ•¸ã€å€åŸŸæ’æ”¾ä¿‚æ•¸
Tertiary: è‡ªå»ºä¿‚æ•¸ï¼ˆçµ„åˆä¿‚æ•¸ï¼‰
```

### ä½¿ç”¨æƒ…æ³è¿½è¹¤

```typescript
interface FactorUsageInfo {
  total_usage_count: number // ç¸½ä½¿ç”¨æ¬¡æ•¸
  project_references: ProjectReference[] // å°ˆæ¡ˆå¼•ç”¨åˆ—è¡¨
  usage_summary: string // æ ¼å¼åŒ–çš„ä½¿ç”¨æ‘˜è¦
}

interface ProjectReference {
  project_id: string
  project_name: string
  project_type: 'L1' | 'L2' | 'L4'
  usage_count: number
  last_used_date: string
}
```

---

## å‘½åè¦ç¯„

### ç¯€é» ID è¦å‰‡

```
ä¸­å¤®ä¿‚æ•¸åº«: favorites
è‡ªå»ºä¿‚æ•¸: user_defined
PACTäº¤æ›: pact
ä¾›æ‡‰å•†ä¿‚æ•¸: supplier
è³‡æ–™é›†: dataset_{id}

L2å°ˆæ¡ˆæ ¹: project_1
L2ç”¢å“: product_1_{ç”¢å“ç·¨è™Ÿ}
L2æ’æ”¾æº: source_1_{ç”¢å“ç·¨è™Ÿ}_{æ’æ”¾æºç·¨è™Ÿ}

L1å°ˆæ¡ˆæ ¹: project_2
L1å¹´åº¦: year_2_{å¹´ä»½}
L1æ’æ”¾æº: source_2_{å¹´ä»½}_{Scopeç·¨è™Ÿ}
```

### å°ˆæ¡ˆé¡å‹æ¨™è¨˜

```typescript
'L1': çµ„ç¹”ç¢³ç›¤æŸ¥ (Organizational Inventory)
'L2': ç”¢å“ç¢³è¶³è·¡ (Product Carbon Footprint)
'L4': ä¾›æ‡‰å•†ä¿‚æ•¸ (Supplier Factors)
```

---

## æœªä¾†æ“´å±•æ–¹å‘

### å¾…é–‹ç™¼åŠŸèƒ½

1. **åŒ¯å‡ºåŠŸèƒ½**
   - åŒ¯å‡ºä¿‚æ•¸ç‚º Excel/CSV
   - åŒ¯å‡ºå°ˆæ¡ˆå ±å‘Š
   - æ‰¹æ¬¡åŒ¯å‡º

2. **é€²éšæœå°‹**
   - è¤‡åˆæ¢ä»¶æœå°‹
   - ä¿å­˜æœå°‹æ¢ä»¶
   - æœå°‹æ­·å²

3. **æ¬Šé™ç®¡ç†**
   - ä½¿ç”¨è€…è§’è‰²
   - è³‡æ–™å­˜å–æ§åˆ¶
   - å¯©æ‰¹æµç¨‹

4. **è³‡æ–™è¦–è¦ºåŒ–**
   - æ’æ”¾é‡è¶¨å‹¢åœ–
   - éšæ®µåˆ†å¸ƒé¤…åœ–
   - Scope åˆ†æåœ–è¡¨

5. **æ‰¹æ¬¡æ“ä½œ**
   - æ‰¹æ¬¡åŒ¯å…¥ä¿‚æ•¸
   - æ‰¹æ¬¡æ›´æ–°ç‹€æ…‹
   - æ‰¹æ¬¡åˆªé™¤

---

## ç¸½çµ

æœ¬ç³»çµ±æä¾›å®Œæ•´çš„æ’æ”¾ä¿‚æ•¸ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š

âœ… **ä¿‚æ•¸ç®¡ç†**ï¼šç€è¦½ã€æœå°‹ã€ç¯©é¸ã€æŸ¥çœ‹è©³æƒ…
âœ… **è‡ªå»ºä¿‚æ•¸**ï¼šå»ºç«‹çµ„åˆä¿‚æ•¸ï¼ˆåŠ ç¸½/åŠ æ¬Šå¹³å‡ï¼‰
âœ… **å°ˆæ¡ˆç®¡ç†**ï¼šL2 ç”¢å“ç¢³è¶³è·¡ã€L1 çµ„ç¹”ç¢³ç›¤æŸ¥
âœ… **è³‡æ–™é›†åŠŸèƒ½**ï¼šè‡ªè¨‚ä¿‚æ•¸é›†åˆï¼Œä¾¿æ–¼åˆ†é¡ç®¡ç†
âœ… **å…¨åŸŸæœå°‹**ï¼šè·¨æ‰€æœ‰è³‡æ–™ä¾†æºçš„å¿«é€Ÿæœå°‹
âœ… **å“è³ªè¿½è¹¤**ï¼šæ•¸æ“šå“è³ªç­‰ç´šã€ä½¿ç”¨æƒ…æ³è¿½è¹¤
âœ… **åŒ¯å…¥åŠŸèƒ½**ï¼šå°‡ç”¢å“ç¢³è¶³è·¡åŒ¯å…¥ä¸­å¤®ä¿‚æ•¸åº«

ç³»çµ±æ¡ç”¨æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œå„çµ„ä»¶è·è²¬æ¸…æ™°ï¼Œæ˜“æ–¼ç¶­è­·å’Œæ“´å±•ã€‚
